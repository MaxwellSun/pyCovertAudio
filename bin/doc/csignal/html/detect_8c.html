<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>CSignal: src/detect.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CSignal
   </div>
   <div id="projectbrief">Cross-platform audio hardware abstraction library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('detect_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">detect.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of signal detection routines.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="detect_8h_source.html">detect.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for detect.c:</div>
<div class="dyncontent">
<div class="center"><img src="detect_8c__incl.png" border="0" usemap="#src_2detect_8c" alt=""/></div>
<map name="src_2detect_8c" id="src_2detect_8c">
<area shape="rect" id="node2" href="detect_8h.html" title="Functions used to detect the presence of input (i.e., received) signals. " alt="" coords="515,79,584,104"/>
<area shape="rect" id="node4" href="csignal_8h.html" title="This is the main include file for the csignal library. This is the only header file that needs to be ..." alt="" coords="512,152,586,177"/>
<area shape="rect" id="node6" href="csignal__error__codes_8h.html" title="The error codes produced by the csignal library are defined here. These error codes are superset of e..." alt="" coords="678,445,831,471"/>
<area shape="rect" id="node8" href="gold__code_8h.html" title="Contains the headers for generating gold codes. Gold codes are used in CDMA applications and provide ..." alt="" coords="808,225,902,251"/>
<area shape="rect" id="node9" href="fir__filter_8h.html" title="This is the header file for the finite impulse response (FIR) filter struct and associated helper fun..." alt="" coords="178,299,254,324"/>
<area shape="rect" id="node12" href="fft_8h.html" title="This file contains the headers for to calculate the FFT of a real&#45; valued signal. The algorightm to c..." alt="" coords="741,225,784,251"/>
<area shape="rect" id="node5" href="wav_8h.html" title="This library contains methods to read and write WAV files. " alt="" coords="342,372,397,397"/>
<area shape="rect" id="node7" href="spreading__code_8h.html" title="This file contains all functions related to creating a spreading code (i.e. the c(t) function in spre..." alt="" coords="691,299,818,324"/>
<area shape="rect" id="node10" href="conv_8h.html" title="Header file for convolution of signals. " alt="" coords="208,372,267,397"/>
<area shape="rect" id="node11" href="kaiser__filter_8h.html" title="This is the header file for the finite impulse response (FIR) Kaiser filter struct and associated hel..." alt="" coords="194,225,294,251"/>
<area shape="rect" id="node13" href="bit__packer_8h.html" title="Definition for methods to store bits in a data structure. " alt="" coords="472,372,565,397"/>
<area shape="rect" id="node14" href="bit__stream_8h.html" title="Functions to handle reading bits from a byte buffer. " alt="" coords="419,299,514,324"/>
</map>
</div>
</div>
<p><a href="detect_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdetect__range__t.html">detect_range_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ab85983a725279dd81de08a91bd2117a4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab85983a725279dd81de08a91bd2117a4"></a>
typedef struct <a class="el" href="structdetect__range__t.html">detect_range_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="detect_8c.html#ab85983a725279dd81de08a91bd2117a4">detect_range</a></td></tr>
<tr class="memdesc:ab85983a725279dd81de08a91bd2117a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct used to hold range information. This struct is used in the find_max algorithm to store the offsets that are likely to contain a hill that needs to be climbed to find a peak. <br /></td></tr>
<tr class="separator:ab85983a725279dd81de08a91bd2117a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1ca8fa95019c114cdc5256ddf24f4a0e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="csignal__error__codes_8h.html#af27703a5c912ceae9e9d5cbdc4e83372">csignal_error_code</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="detect_8c.html#a1ca8fa95019c114cdc5256ddf24f4a0e">detect_exhaustive_find_max</a> (USIZE in_signal_length, FLOAT64 *in_signal, USIZE in_spreading_signal_length, FLOAT64 *in_spread_signal, SSIZE in_start_index, SSIZE in_end_index, UINT32 in_exhaustive_decimation, <a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *in_narrowband_filter, <a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *in_lowpass_filter, SSIZE *out_offset)</td></tr>
<tr class="memdesc:a1ca8fa95019c114cdc5256ddf24f4a0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs an exhaustive search for the offset in in_signal between in_start_index and in_end_index that has the highest energy.  <a href="#a1ca8fa95019c114cdc5256ddf24f4a0e">More...</a><br /></td></tr>
<tr class="separator:a1ca8fa95019c114cdc5256ddf24f4a0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8790a34d8b6270deb772bc8c4aed78bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="csignal__error__codes_8h.html#af27703a5c912ceae9e9d5cbdc4e83372">csignal_error_code</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="detect_8c.html#a8790a34d8b6270deb772bc8c4aed78bb">detect_find_max</a> (USIZE in_signal_length, FLOAT64 *in_signal, USIZE in_spreading_signal_length, FLOAT64 *in_spread_signal, SSIZE in_start_index, SSIZE in_end_index, FLOAT64 in_exhaustive_difference, UINT32 in_exhaustive_decimation, <a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *in_narrowband_filter, <a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *in_lowpass_filter, SSIZE *out_offset)</td></tr>
<tr class="memdesc:a8790a34d8b6270deb772bc8c4aed78bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a hill climbing algorithm until the energy difference on both sides of the hill are within in_exhaustive_differnece (percentage) of one another. Once this occurrs the algorithm switches to exhaustive search.  <a href="#a8790a34d8b6270deb772bc8c4aed78bb">More...</a><br /></td></tr>
<tr class="separator:a8790a34d8b6270deb772bc8c4aed78bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b2d4032c293105bfe6e13c37bfe7211"><td class="memItemLeft" align="right" valign="top"><a class="el" href="csignal__error__codes_8h.html#af27703a5c912ceae9e9d5cbdc4e83372">csignal_error_code</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="detect_8c.html#a0b2d4032c293105bfe6e13c37bfe7211">detect_calculate_energy</a> (USIZE in_signal_length, FLOAT64 *in_signal, USIZE in_spread_signal_length, FLOAT64 *in_spread_signal, <a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *in_narrowband_filter, <a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *in_lowpass_filter, FLOAT64 *out_energy)</td></tr>
<tr class="memdesc:a0b2d4032c293105bfe6e13c37bfe7211"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the energy in in_signal by executing the following algorithm:  <a href="#a0b2d4032c293105bfe6e13c37bfe7211">More...</a><br /></td></tr>
<tr class="separator:a0b2d4032c293105bfe6e13c37bfe7211"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9e80bc29cc4f42bcc6b990fd37e8517"><td class="memItemLeft" align="right" valign="top"><a class="el" href="csignal__error__codes_8h.html#af27703a5c912ceae9e9d5cbdc4e83372">csignal_error_code</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="detect_8c.html#af9e80bc29cc4f42bcc6b990fd37e8517">detect_find_highest_energy_offset</a> (USIZE in_signal_length, FLOAT64 *in_signal, USIZE in_spreading_signal_length, FLOAT64 *in_spread_signal, USIZE in_number_of_tests, USIZE in_step_size, <a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *in_narrowband_filter, <a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *in_lowpass_filter, FLOAT64 in_threshold, FLOAT64 in_exhaustive_difference, UINT32 in_exhaustive_decimation, USIZE *out_offset)</td></tr>
<tr class="memdesc:af9e80bc29cc4f42bcc6b990fd37e8517"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function performs the following algorithm:  <a href="#af9e80bc29cc4f42bcc6b990fd37e8517">More...</a><br /></td></tr>
<tr class="separator:af9e80bc29cc4f42bcc6b990fd37e8517"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of signal detection routines. </p>

<p>Definition in file <a class="el" href="detect_8c_source.html">detect.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a0b2d4032c293105bfe6e13c37bfe7211"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="csignal__error__codes_8h.html#af27703a5c912ceae9e9d5cbdc4e83372">csignal_error_code</a> detect_calculate_energy </td>
          <td>(</td>
          <td class="paramtype">USIZE&#160;</td>
          <td class="paramname"><em>in_signal_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64 *&#160;</td>
          <td class="paramname"><em>in_signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">USIZE&#160;</td>
          <td class="paramname"><em>in_spread_signal_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64 *&#160;</td>
          <td class="paramname"><em>in_spread_signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *&#160;</td>
          <td class="paramname"><em>in_narrowband_filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *&#160;</td>
          <td class="paramname"><em>in_lowpass_filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64 *&#160;</td>
          <td class="paramname"><em>out_energy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the energy in in_signal by executing the following algorithm: </p>
<p>a = multiply( in_signal, in_spread_signal ) b = filter( narrowband_filter, a ) c = multiply( b, b ) d = filter( lowpass_filter, c ) energy = sum( d )</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_signal_length</td><td>The number of elements in in_signal. </td></tr>
    <tr><td class="paramname">in_signal</td><td>The signal whose energy is to be calculated. </td></tr>
    <tr><td class="paramname">in_spread_signal_length</td><td>The number of elements in in_spread_signal. </td></tr>
    <tr><td class="paramname">in_spread_signal</td><td>The signal used to despread in_signal. </td></tr>
    <tr><td class="paramname">in_narrowband_filter</td><td>A BPF applied after in_signal is despread. </td></tr>
    <tr><td class="paramname">in_lowpass_filter</td><td>A LPF applied to remove the double frequency term created after squaring the signal. </td></tr>
    <tr><td class="paramname">out_energy</td><td>The energy in in_signal or NULL if an error occurrs. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns NO_ERROR upon succesful exection or one of these errors: <pre class="fragment">    CPC_ERROR_CODE_NULL_POINTER If any of the input parameters are null.</pre> </dd></dl>

<p>Definition at line <a class="el" href="detect_8c_source.html#l00143">143</a> of file <a class="el" href="detect_8c_source.html">detect.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="detect_8c_a0b2d4032c293105bfe6e13c37bfe7211_cgraph.png" border="0" usemap="#detect_8c_a0b2d4032c293105bfe6e13c37bfe7211_cgraph" alt=""/></div>
<map name="detect_8c_a0b2d4032c293105bfe6e13c37bfe7211_cgraph" id="detect_8c_a0b2d4032c293105bfe6e13c37bfe7211_cgraph">
<area shape="rect" id="node2" href="csignal_8c.html#a020a512a3e0cb80b3db84bf477199c45" title="Multipy two signals and put the result in a newly created array out_signal. out_signal is malloc&#39;d in..." alt="" coords="219,5,377,31"/>
<area shape="rect" id="node3" href="fir__filter_8c.html#a522cab3b421c91eb45eb10a6070d2991" title="Performs a convolution of the coefficients in in_filter and the signal values in in_signal. Stores the results in out_filtered_signal. If an error occurrs out_filtered_signal_length will be set to 0 and out_filtered_signal will be set to NULL. " alt="" coords="229,55,367,80"/>
<area shape="rect" id="node5" href="csignal_8c.html#add4c595f4cbbb3f00cc5dc6e9e5d4cea" title="Performs a scalar multiplication of all elements in in_signal by the factor in_scalar and sums the sc..." alt="" coords="229,104,367,129"/>
<area shape="rect" id="node4" href="conv_8c.html#a9f264d44667dcad1a18256448c3a81b3" title="Perfors the convolution of signal one and two, stores the output in a newly created array..." alt="" coords="425,55,499,80"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="detect_8c_a0b2d4032c293105bfe6e13c37bfe7211_icgraph.png" border="0" usemap="#detect_8c_a0b2d4032c293105bfe6e13c37bfe7211_icgraph" alt=""/></div>
<map name="detect_8c_a0b2d4032c293105bfe6e13c37bfe7211_icgraph" id="detect_8c_a0b2d4032c293105bfe6e13c37bfe7211_icgraph">
<area shape="rect" id="node2" href="detect_8h.html#af9e80bc29cc4f42bcc6b990fd37e8517" title="This function performs the following algorithm: " alt="" coords="625,19,762,58"/>
<area shape="rect" id="node3" href="detect_8c.html#a1ca8fa95019c114cdc5256ddf24f4a0e" title="Performs an exhaustive search for the offset in in_signal between in_start_index and in_end_index tha..." alt="" coords="219,26,410,51"/>
<area shape="rect" id="node4" href="detect_8c.html#a8790a34d8b6270deb772bc8c4aed78bb" title="Performs a hill climbing algorithm until the energy difference on both sides of the hill are within i..." alt="" coords="458,76,577,102"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1ca8fa95019c114cdc5256ddf24f4a0e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="csignal__error__codes_8h.html#af27703a5c912ceae9e9d5cbdc4e83372">csignal_error_code</a> detect_exhaustive_find_max </td>
          <td>(</td>
          <td class="paramtype">USIZE&#160;</td>
          <td class="paramname"><em>in_signal_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64 *&#160;</td>
          <td class="paramname"><em>in_signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">USIZE&#160;</td>
          <td class="paramname"><em>in_spreading_signal_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64 *&#160;</td>
          <td class="paramname"><em>in_spread_signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SSIZE&#160;</td>
          <td class="paramname"><em>in_start_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SSIZE&#160;</td>
          <td class="paramname"><em>in_end_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>in_exhaustive_decimation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *&#160;</td>
          <td class="paramname"><em>in_narrowband_filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *&#160;</td>
          <td class="paramname"><em>in_lowpass_filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SSIZE *&#160;</td>
          <td class="paramname"><em>out_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs an exhaustive search for the offset in in_signal between in_start_index and in_end_index that has the highest energy. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_signal_length</td><td>The number of elements in in_signal. </td></tr>
    <tr><td class="paramname">in_signal</td><td>The signal whose energy is to be calculated. </td></tr>
    <tr><td class="paramname">in_spreading_signal_length</td><td>The number of elements in in_spread_signal. </td></tr>
    <tr><td class="paramname">in_spread_signal</td><td>The signal used to despread in_signal. </td></tr>
    <tr><td class="paramname">in_start_index</td><td>The index to begin the search at (the first index in the range to search). </td></tr>
    <tr><td class="paramname">in_end_index</td><td>The index to end the search at (the last index in the range to search). </td></tr>
    <tr><td class="paramname">in_exhaustive_decimation</td><td>The decimation factor (step size) to use when the algorithm enters the exhaustive search mode. </td></tr>
    <tr><td class="paramname">in_narrowband_filter</td><td>A BPF applied after in_signal is despread. </td></tr>
    <tr><td class="paramname">in_lowpass_filter</td><td>A LPF applied to remove the double frequency term created after squaring the signal. </td></tr>
    <tr><td class="paramname">out_offset</td><td>The offset in in_signal with the highest energy. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns NO_ERROR upon succesful exection or one of these errors: <pre class="fragment">    CPC_ERROR_CODE_NULL_POINTER If any of the input parameters are null.
    CPC_ERROR_CODE_INVALID_PARAMETER  If in_start_index &gt; in_end_index.</pre> </dd></dl>

<p>Definition at line <a class="el" href="detect_8c_source.html#l00554">554</a> of file <a class="el" href="detect_8c_source.html">detect.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="detect_8c_a1ca8fa95019c114cdc5256ddf24f4a0e_cgraph.png" border="0" usemap="#detect_8c_a1ca8fa95019c114cdc5256ddf24f4a0e_cgraph" alt=""/></div>
<map name="detect_8c_a1ca8fa95019c114cdc5256ddf24f4a0e_cgraph" id="detect_8c_a1ca8fa95019c114cdc5256ddf24f4a0e_cgraph">
<area shape="rect" id="node2" href="detect_8c.html#a0b2d4032c293105bfe6e13c37bfe7211" title="Calculates the energy in in_signal by executing the following algorithm: " alt="" coords="244,55,410,80"/>
<area shape="rect" id="node3" href="csignal_8c.html#a020a512a3e0cb80b3db84bf477199c45" title="Multipy two signals and put the result in a newly created array out_signal. out_signal is malloc&#39;d in..." alt="" coords="458,5,615,31"/>
<area shape="rect" id="node4" href="fir__filter_8c.html#a522cab3b421c91eb45eb10a6070d2991" title="Performs a convolution of the coefficients in in_filter and the signal values in in_signal. Stores the results in out_filtered_signal. If an error occurrs out_filtered_signal_length will be set to 0 and out_filtered_signal will be set to NULL. " alt="" coords="468,55,605,80"/>
<area shape="rect" id="node6" href="csignal_8c.html#add4c595f4cbbb3f00cc5dc6e9e5d4cea" title="Performs a scalar multiplication of all elements in in_signal by the factor in_scalar and sums the sc..." alt="" coords="468,104,605,129"/>
<area shape="rect" id="node5" href="conv_8c.html#a9f264d44667dcad1a18256448c3a81b3" title="Perfors the convolution of signal one and two, stores the output in a newly created array..." alt="" coords="663,55,737,80"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="detect_8c_a1ca8fa95019c114cdc5256ddf24f4a0e_icgraph.png" border="0" usemap="#detect_8c_a1ca8fa95019c114cdc5256ddf24f4a0e_icgraph" alt=""/></div>
<map name="detect_8c_a1ca8fa95019c114cdc5256ddf24f4a0e_icgraph" id="detect_8c_a1ca8fa95019c114cdc5256ddf24f4a0e_icgraph">
<area shape="rect" id="node2" href="detect_8h.html#af9e80bc29cc4f42bcc6b990fd37e8517" title="This function performs the following algorithm: " alt="" coords="411,5,548,44"/>
<area shape="rect" id="node3" href="detect_8c.html#a8790a34d8b6270deb772bc8c4aed78bb" title="Performs a hill climbing algorithm until the energy difference on both sides of the hill are within i..." alt="" coords="244,37,363,63"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af9e80bc29cc4f42bcc6b990fd37e8517"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="csignal__error__codes_8h.html#af27703a5c912ceae9e9d5cbdc4e83372">csignal_error_code</a> detect_find_highest_energy_offset </td>
          <td>(</td>
          <td class="paramtype">USIZE&#160;</td>
          <td class="paramname"><em>in_signal_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64 *&#160;</td>
          <td class="paramname"><em>in_signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">USIZE&#160;</td>
          <td class="paramname"><em>in_spreading_signal_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64 *&#160;</td>
          <td class="paramname"><em>in_spread_signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">USIZE&#160;</td>
          <td class="paramname"><em>in_number_of_tests</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">USIZE&#160;</td>
          <td class="paramname"><em>in_step_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *&#160;</td>
          <td class="paramname"><em>in_narrowband_filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *&#160;</td>
          <td class="paramname"><em>in_lowpass_filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64&#160;</td>
          <td class="paramname"><em>in_threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64&#160;</td>
          <td class="paramname"><em>in_exhaustive_difference</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>in_exhaustive_decimation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">USIZE *&#160;</td>
          <td class="paramname"><em>out_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function performs the following algorithm: </p>
<p>1) Checks in_signal[ i ] for energy above threshold, where 0 &lt;= i &lt;= in_number_of_tests and i jumps in_step_size between checks. 2) Ranges where the energy is above threshold are created from the results in step 1. 3) A hill climbing algorithm is performed on each range. 4) Once the hill climbing algorithm gets to a point where the energy on both sides of the hill are within in_exhaustive_difference percentage of each other the algorithm exhaustively checks the indices for a peak.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_signal_length</td><td>The number of elements in in_signal. </td></tr>
    <tr><td class="paramname">in_signal</td><td>The signal whose energy is to be calculated. </td></tr>
    <tr><td class="paramname">in_spreading_signal_length</td><td>The number of elements in in_spread_signal. </td></tr>
    <tr><td class="paramname">in_spread_signal</td><td>The signal used to despread in_signal. </td></tr>
    <tr><td class="paramname">in_number_of_tests</td><td>The number of offsets to check in in_signal, i.e., offsets 0 to in_number_of_tests in in_signal are checked, during the phase algorithm that searches for the beginning and end of hills. </td></tr>
    <tr><td class="paramname">in_step_size</td><td>The number of offsets (smaples) to skip between each test (1 for exhaustive). </td></tr>
    <tr><td class="paramname">in_narrowband_filter</td><td>A BPF applied after in_signal is despread. </td></tr>
    <tr><td class="paramname">in_lowpass_filter</td><td>A LPF applied to remove the double frequency term created after squaring the signal. </td></tr>
    <tr><td class="paramname">in_exhaustive_difference</td><td>When performing the hill climbing algorithm the search strategy will switch to exhaustive search when the energy on both sides of the hill are within this difference (note that this is a percentage difference). </td></tr>
    <tr><td class="paramname">in_exhaustive_decimation</td><td>The decimation factor (step size) to use when the algorithm enters the exhaustive search mode. </td></tr>
    <tr><td class="paramname">in_threshold</td><td>When performing the initial phase of the algorithm that looks for hills evidence of a hill is determined if the energy at the specific offset is above in_threshold. </td></tr>
    <tr><td class="paramname">out_offset</td><td>The offset in in_signal with the highest energy. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns NO_ERROR upon succesful exection or one of these errors: <pre class="fragment">    CPC_ERROR_CODE_NULL_POINTER If any of the input parameters are null.
    CPC_ERROR_CODE_INVALID_PARAMETER  If in_spread_signal_length &gt;
                                      in_signal_length.
    CSIGNAL_ERROR_CODE_NO_RESULT  If no evidence of the spreading signal
                                  is found in in_signal (i.e., no offset
                                  in in_signal is above in_threshold).</pre> </dd></dl>

<p>Definition at line <a class="el" href="detect_8c_source.html#l00333">333</a> of file <a class="el" href="detect_8c_source.html">detect.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="detect_8c_af9e80bc29cc4f42bcc6b990fd37e8517_cgraph.png" border="0" usemap="#detect_8c_af9e80bc29cc4f42bcc6b990fd37e8517_cgraph" alt=""/></div>
<map name="detect_8c_af9e80bc29cc4f42bcc6b990fd37e8517_cgraph" id="detect_8c_af9e80bc29cc4f42bcc6b990fd37e8517_cgraph">
<area shape="rect" id="node2" href="detect_8c.html#a0b2d4032c293105bfe6e13c37bfe7211" title="Calculates the energy in in_signal by executing the following algorithm: " alt="" coords="596,55,762,80"/>
<area shape="rect" id="node7" href="detect_8c.html#a8790a34d8b6270deb772bc8c4aed78bb" title="Performs a hill climbing algorithm until the energy difference on both sides of the hill are within i..." alt="" coords="190,55,309,80"/>
<area shape="rect" id="node8" href="detect_8c.html#a1ca8fa95019c114cdc5256ddf24f4a0e" title="Performs an exhaustive search for the offset in in_signal between in_start_index and in_end_index tha..." alt="" coords="357,105,548,131"/>
<area shape="rect" id="node3" href="csignal_8c.html#a020a512a3e0cb80b3db84bf477199c45" title="Multipy two signals and put the result in a newly created array out_signal. out_signal is malloc&#39;d in..." alt="" coords="810,5,967,31"/>
<area shape="rect" id="node4" href="fir__filter_8c.html#a522cab3b421c91eb45eb10a6070d2991" title="Performs a convolution of the coefficients in in_filter and the signal values in in_signal. Stores the results in out_filtered_signal. If an error occurrs out_filtered_signal_length will be set to 0 and out_filtered_signal will be set to NULL. " alt="" coords="820,55,957,80"/>
<area shape="rect" id="node6" href="csignal_8c.html#add4c595f4cbbb3f00cc5dc6e9e5d4cea" title="Performs a scalar multiplication of all elements in in_signal by the factor in_scalar and sums the sc..." alt="" coords="820,104,957,129"/>
<area shape="rect" id="node5" href="conv_8c.html#a9f264d44667dcad1a18256448c3a81b3" title="Perfors the convolution of signal one and two, stores the output in a newly created array..." alt="" coords="1015,55,1089,80"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8790a34d8b6270deb772bc8c4aed78bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="csignal__error__codes_8h.html#af27703a5c912ceae9e9d5cbdc4e83372">csignal_error_code</a> detect_find_max </td>
          <td>(</td>
          <td class="paramtype">USIZE&#160;</td>
          <td class="paramname"><em>in_signal_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64 *&#160;</td>
          <td class="paramname"><em>in_signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">USIZE&#160;</td>
          <td class="paramname"><em>in_spreading_signal_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64 *&#160;</td>
          <td class="paramname"><em>in_spread_signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SSIZE&#160;</td>
          <td class="paramname"><em>in_start_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SSIZE&#160;</td>
          <td class="paramname"><em>in_end_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64&#160;</td>
          <td class="paramname"><em>in_exhaustive_difference</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>in_exhaustive_decimation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *&#160;</td>
          <td class="paramname"><em>in_narrowband_filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fir__filter_8h.html#a87731b078756800793cad5d8d2756257">fir_passband_filter</a> *&#160;</td>
          <td class="paramname"><em>in_lowpass_filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SSIZE *&#160;</td>
          <td class="paramname"><em>out_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a hill climbing algorithm until the energy difference on both sides of the hill are within in_exhaustive_differnece (percentage) of one another. Once this occurrs the algorithm switches to exhaustive search. </p>
<dl class="section note"><dt>Note</dt><dd>The hill climbing alorithm works by cutting the list of candidates for peak energy in half each iteration. Each iteration two offsets are calculated, one in the first half of the range and one in the second. Their energy is calculated and compared. If one energy is much higher than the other the next iteration will look at that half, otherwise exhaustive search is performed. </dd>
<dd>
This algorithm will recursively call itself on smaller and smaller ranges.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_signal_length</td><td>The number of elements in in_signal. </td></tr>
    <tr><td class="paramname">in_signal</td><td>The signal whose energy is to be calculated. </td></tr>
    <tr><td class="paramname">in_spreading_signal_length</td><td>The number of elements in in_spread_signal. </td></tr>
    <tr><td class="paramname">in_spread_signal</td><td>The signal used to despread in_signal. </td></tr>
    <tr><td class="paramname">in_start_index</td><td>The index to begin the search at (the first index in the range to search). </td></tr>
    <tr><td class="paramname">in_end_index</td><td>The index to end the search at (the last index in the range to search). </td></tr>
    <tr><td class="paramname">in_exhaustive_difference</td><td>When performing the hill climbing algorithm the search strategy will switch to exhaustive search when the energy on both sides of the hill are within this difference (note that this is a percentage difference). </td></tr>
    <tr><td class="paramname">in_exhaustive_decimation</td><td>The decimation factor (step size) to use when the algorithm enters the exhaustive search mode. </td></tr>
    <tr><td class="paramname">in_narrowband_filter</td><td>A BPF applied after in_signal is despread. </td></tr>
    <tr><td class="paramname">in_lowpass_filter</td><td>A LPF applied to remove the double frequency term created after squaring the signal. </td></tr>
    <tr><td class="paramname">out_offset</td><td>The offset in in_signal with the highest energy. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns NO_ERROR upon succesful exection or one of these errors: <pre class="fragment">    CPC_ERROR_CODE_NULL_POINTER If any of the input parameters are null.
    CPC_ERROR_CODE_INVALID_PARAMETER  If in_start_index &gt; in_end_index.</pre> </dd></dl>

<p>Definition at line <a class="el" href="detect_8c_source.html#l00646">646</a> of file <a class="el" href="detect_8c_source.html">detect.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="detect_8c_a8790a34d8b6270deb772bc8c4aed78bb_cgraph.png" border="0" usemap="#detect_8c_a8790a34d8b6270deb772bc8c4aed78bb_cgraph" alt=""/></div>
<map name="detect_8c_a8790a34d8b6270deb772bc8c4aed78bb_cgraph" id="detect_8c_a8790a34d8b6270deb772bc8c4aed78bb_cgraph">
<area shape="rect" id="node2" href="detect_8c.html#a0b2d4032c293105bfe6e13c37bfe7211" title="Calculates the energy in in_signal by executing the following algorithm: " alt="" coords="411,55,577,80"/>
<area shape="rect" id="node7" href="detect_8c.html#a1ca8fa95019c114cdc5256ddf24f4a0e" title="Performs an exhaustive search for the offset in in_signal between in_start_index and in_end_index tha..." alt="" coords="173,80,363,105"/>
<area shape="rect" id="node3" href="csignal_8c.html#a020a512a3e0cb80b3db84bf477199c45" title="Multipy two signals and put the result in a newly created array out_signal. out_signal is malloc&#39;d in..." alt="" coords="625,5,782,31"/>
<area shape="rect" id="node4" href="fir__filter_8c.html#a522cab3b421c91eb45eb10a6070d2991" title="Performs a convolution of the coefficients in in_filter and the signal values in in_signal. Stores the results in out_filtered_signal. If an error occurrs out_filtered_signal_length will be set to 0 and out_filtered_signal will be set to NULL. " alt="" coords="635,55,772,80"/>
<area shape="rect" id="node6" href="csignal_8c.html#add4c595f4cbbb3f00cc5dc6e9e5d4cea" title="Performs a scalar multiplication of all elements in in_signal by the factor in_scalar and sums the sc..." alt="" coords="635,104,772,129"/>
<area shape="rect" id="node5" href="conv_8c.html#a9f264d44667dcad1a18256448c3a81b3" title="Perfors the convolution of signal one and two, stores the output in a newly created array..." alt="" coords="830,55,904,80"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="detect_8c_a8790a34d8b6270deb772bc8c4aed78bb_icgraph.png" border="0" usemap="#detect_8c_a8790a34d8b6270deb772bc8c4aed78bb_icgraph" alt=""/></div>
<map name="detect_8c_a8790a34d8b6270deb772bc8c4aed78bb_icgraph" id="detect_8c_a8790a34d8b6270deb772bc8c4aed78bb_icgraph">
<area shape="rect" id="node2" href="detect_8h.html#af9e80bc29cc4f42bcc6b990fd37e8517" title="This function performs the following algorithm: " alt="" coords="173,5,309,44"/>
</map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="detect_8c.html">detect.c</a></li>
    <li class="footer">Generated on Fri Apr 1 2016 09:45:22 for CSignal by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
