<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>CAHAL: src/include/darwin/darwin_cahal_device.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CAHAL
   </div>
   <div id="projectbrief">Cross-platform audio hardware abstraction library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('darwin__cahal__device_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">darwin_cahal_device.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Common code for iOS and OSX to handle recording/playback.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;CoreFoundation/CoreFoundation.h&gt;</code><br />
<code>#include &lt;AudioToolbox/AudioToolbox.h&gt;</code><br />
<code>#include &lt;darwin_helper.h&gt;</code><br />
<code>#include &quot;<a class="el" href="cahal_8h_source.html">cahal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cahal__device_8h_source.html">cahal_device.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cahal__device__stream_8h_source.html">cahal_device_stream.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cahal__audio__format__flags_8h_source.html">cahal_audio_format_flags.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="darwin__cahal__audio__format__flags_8h_source.html">darwin_cahal_audio_format_flags.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="darwin__cahal__audio__format__description_8h_source.html">darwin_cahal_audio_format_description.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for darwin_cahal_device.h:</div>
<div class="dyncontent">
<div class="center"><img src="darwin__cahal__device_8h__incl.png" border="0" usemap="#src_2include_2darwin_2darwin__cahal__device_8h" alt=""/></div>
<map name="src_2include_2darwin_2darwin__cahal__device_8h" id="src_2include_2darwin_2darwin__cahal__device_8h">
<area shape="rect" id="node5" href="cahal_8h.html" title="This is the only header that an external library/binary should have include. Provides a cross&#45;platfor..." alt="" coords="881,99,945,124"/>
<area shape="rect" id="node7" href="cahal__device_8h.html" title="The platform agnostic CAHAL device struct is defined in this file. All helper functions that are impl..." alt="" coords="818,179,928,204"/>
<area shape="rect" id="node8" href="cahal__audio__format__flags_8h.html" title="List of platform agnostic audio format flags and helper functions to display their value..." alt="" coords="673,252,811,291"/>
<area shape="rect" id="node10" href="cahal__device__stream_8h.html" title="All cahal_device_stream structs and typedefs are defined in this file. All functions related to the s..." alt="" coords="987,259,1145,284"/>
<area shape="rect" id="node11" href="darwin__cahal__audio__format__flags_8h.html" title="Helper functions to convert CAHAL audio format flags to core audio flags and vice&#45;versa. " alt="" coords="252,92,392,131"/>
<area shape="rect" id="node12" href="darwin__cahal__audio__format__description_8h.html" title="This is the platform&#45;specific file responsible for querying the hardware for its supported audio form..." alt="" coords="466,92,616,131"/>
<area shape="rect" id="node9" href="cahal__audio__format__description_8h.html" title="All constants, typedefs and functions related to audio formats and sample rates are defined in this f..." alt="" coords="886,339,1025,377"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="darwin__cahal__device_8h__dep__incl.png" border="0" usemap="#src_2include_2darwin_2darwin__cahal__device_8hdep" alt=""/></div>
<map name="src_2include_2darwin_2darwin__cahal__device_8hdep" id="src_2include_2darwin_2darwin__cahal__device_8hdep">
<area shape="rect" id="node2" href="darwin__cahal__device_8c.html" title="src/darwin/darwin_cahal\l_device.c" alt="" coords="5,99,170,137"/>
<area shape="rect" id="node3" href="ios__cahal__device__stream_8h_source.html" title="src/include/darwin\l/ios/ios_cahal_device\l_stream.h" alt="" coords="193,92,342,144"/>
<area shape="rect" id="node4" href="ios__cahal__device__stream_8c.html" title="src/darwin/ios/ios\l_cahal_device_stream.c" alt="" coords="92,192,257,231"/>
<area shape="rect" id="node5" href="ios__cahal__device_8h.html" title="iOS platform specific calls to generate the device struct. " alt="" coords="281,192,440,231"/>
<area shape="rect" id="node6" href="ios__cahal__device_8c.html" title="src/darwin/ios/ios\l_cahal_device.c" alt="" coords="150,279,273,317"/>
<area shape="rect" id="node7" href="ios__cahal_8h.html" title="iOS platform specific calls to initialize the audio API. " alt="" coords="297,279,425,317"/>
<area shape="rect" id="node9" href="ios__cahal__initialize_8h.html" title="objective&#45;c class that provides access to the underlying playback/ record hardware via an objective&#45;c..." alt="" coords="449,279,617,317"/>
<area shape="rect" id="node8" href="ios__cahal_8c.html" title="src/darwin/ios/ios\l_cahal.c" alt="" coords="299,365,423,404"/>
<area shape="rect" id="node10" href="ios__cahal__initialize_8m.html" title="src/darwin/ios/ios\l_cahal_initialize.m" alt="" coords="468,365,598,404"/>
</map>
</div>
</div>
<p><a href="darwin__cahal__device_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdarwin__context__t.html">darwin_context_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a2b2519790de6b0f515705a4fb050c1c3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b2519790de6b0f515705a4fb050c1c3"></a>
typedef struct <a class="el" href="structdarwin__context__t.html">darwin_context_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="darwin__cahal__device_8h.html#a2b2519790de6b0f515705a4fb050c1c3">darwin_context</a></td></tr>
<tr class="memdesc:a2b2519790de6b0f515705a4fb050c1c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the platform-specific struct that stores the references required to release the audio device back to the OS. <br /></td></tr>
<tr class="separator:a2b2519790de6b0f515705a4fb050c1c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa7f707d631530f0be6a85538085e66b3"><td class="memItemLeft" align="right" valign="top">OSStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="darwin__cahal__device_8h.html#aa7f707d631530f0be6a85538085e66b3">darwin_configure_asbd</a> (<a class="el" href="cahal__audio__format__description_8h.html#a99cb016efcedca0bb122fd85f60e888a">cahal_audio_format_id</a> in_format_id, UINT32 in_number_of_channels, FLOAT64 in_sample_rate, UINT32 in_bit_depth, cahal_audio_format_flag in_format_flags, <a class="el" href="cahal__device__stream_8h.html#a704050c453a1c595e0e3bbfd1a096cab">cahal_device_stream_direction</a> in_direction, AudioStreamBasicDescription *out_asbd)</td></tr>
<tr class="memdesc:aa7f707d631530f0be6a85538085e66b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to create the AudioStreamBasicDescrition. This is the platform specific model that is populated with the format information and parameters. The ASBD is used in both input and output operations.  <a href="#aa7f707d631530f0be6a85538085e66b3">More...</a><br /></td></tr>
<tr class="separator:aa7f707d631530f0be6a85538085e66b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78478e68ba0079c6a4ff8f7f1bd37533"><td class="memItemLeft" align="right" valign="top">OSStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="darwin__cahal__device_8h.html#a78478e68ba0079c6a4ff8f7f1bd37533">darwin_compute_bytes_per_buffer</a> (AudioStreamBasicDescription *in_asbd, FLOAT32 in_number_of_seconds, UINT32 *out_bytes_per_buffer)</td></tr>
<tr class="memdesc:a78478e68ba0079c6a4ff8f7f1bd37533"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to calculate number of bytes to put in each buffer based on the configured ASBD and in_number_of_seconds.  <a href="#a78478e68ba0079c6a4ff8f7f1bd37533">More...</a><br /></td></tr>
<tr class="separator:a78478e68ba0079c6a4ff8f7f1bd37533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc68411bd69aa34e1fa7eb38b781e47b"><td class="memItemLeft" align="right" valign="top">OSStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="darwin__cahal__device_8h.html#adc68411bd69aa34e1fa7eb38b781e47b">darwin_configure_input_audio_queue</a> (<a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *in_device, <a class="el" href="structcahal__recorder__info__t.html">cahal_recorder_info</a> *in_callback_info, AudioStreamBasicDescription *io_asbd, AudioQueueRef *out_audio_queue)</td></tr>
<tr class="memdesc:adc68411bd69aa34e1fa7eb38b781e47b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the platforms input (record) audio queue.  <a href="#adc68411bd69aa34e1fa7eb38b781e47b">More...</a><br /></td></tr>
<tr class="separator:adc68411bd69aa34e1fa7eb38b781e47b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad55eee5f011b9761823ec6901c000ddc"><td class="memItemLeft" align="right" valign="top">OSStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="darwin__cahal__device_8h.html#ad55eee5f011b9761823ec6901c000ddc">darwin_configure_output_audio_queue</a> (<a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *in_device, <a class="el" href="cahal__device_8h.html#a15208bec2f5c3e8dce404a8c40a66c36">cahal_playback_info</a> *in_callback_info, FLOAT32 in_volume, AudioStreamBasicDescription *in_asbd, AudioQueueRef *out_audio_queue)</td></tr>
<tr class="memdesc:ad55eee5f011b9761823ec6901c000ddc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the platforms ouput (playback) audio queue.  <a href="#ad55eee5f011b9761823ec6901c000ddc">More...</a><br /></td></tr>
<tr class="separator:ad55eee5f011b9761823ec6901c000ddc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7080994b4cb4f50629509cccf4346546"><td class="memItemLeft" align="right" valign="top">OSStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="darwin__cahal__device_8h.html#a7080994b4cb4f50629509cccf4346546">darwin_configure_input_audio_queue_buffer</a> (AudioStreamBasicDescription *in_asbd, <a class="el" href="darwin__cahal__device_8h.html#a2b2519790de6b0f515705a4fb050c1c3">darwin_context</a> *out_context, AudioQueueRef io_audio_queue)</td></tr>
<tr class="memdesc:a7080994b4cb4f50629509cccf4346546"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates the necessary audio queue buffers and populates the queue with them.  <a href="#a7080994b4cb4f50629509cccf4346546">More...</a><br /></td></tr>
<tr class="separator:a7080994b4cb4f50629509cccf4346546"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19914cf2a88212c7b7e531eb872a85f6"><td class="memItemLeft" align="right" valign="top">OSStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="darwin__cahal__device_8h.html#a19914cf2a88212c7b7e531eb872a85f6">darwin_configure_output_audio_queue_buffer</a> (AudioStreamBasicDescription *in_asbd, <a class="el" href="cahal__device_8h.html#a15208bec2f5c3e8dce404a8c40a66c36">cahal_playback_info</a> *in_playback, <a class="el" href="darwin__cahal__device_8h.html#a2b2519790de6b0f515705a4fb050c1c3">darwin_context</a> *out_context, AudioQueueRef io_audio_queue)</td></tr>
<tr class="memdesc:a19914cf2a88212c7b7e531eb872a85f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates the necessary audio queue buffers and populates the queue with them. This function will call the playback callback to initially populate the buffer queue with data.  <a href="#a19914cf2a88212c7b7e531eb872a85f6">More...</a><br /></td></tr>
<tr class="separator:a19914cf2a88212c7b7e531eb872a85f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e7e4e383efa6218f944cb80201bd970"><td class="memItemLeft" align="right" valign="top">OSStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="darwin__cahal__device_8h.html#a6e7e4e383efa6218f944cb80201bd970">darwin_free_context</a> (<a class="el" href="darwin__cahal__device_8h.html#a2b2519790de6b0f515705a4fb050c1c3">darwin_context</a> *io_context)</td></tr>
<tr class="memdesc:a6e7e4e383efa6218f944cb80201bd970"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees all the structs in io_context. Releases the audio queue and buffers back to the OS using the AudioQueue* API.  <a href="#a6e7e4e383efa6218f944cb80201bd970">More...</a><br /></td></tr>
<tr class="separator:a6e7e4e383efa6218f944cb80201bd970"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Common code for iOS and OSX to handle recording/playback. </p>
<dl class="section author"><dt>Author</dt><dd>Brent Carrara </dd></dl>

<p>Definition in file <a class="el" href="darwin__cahal__device_8h_source.html">darwin_cahal_device.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a78478e68ba0079c6a4ff8f7f1bd37533"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OSStatus darwin_compute_bytes_per_buffer </td>
          <td>(</td>
          <td class="paramtype">AudioStreamBasicDescription *&#160;</td>
          <td class="paramname"><em>in_asbd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT32&#160;</td>
          <td class="paramname"><em>in_number_of_seconds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32 *&#160;</td>
          <td class="paramname"><em>out_bytes_per_buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to calculate number of bytes to put in each buffer based on the configured ASBD and in_number_of_seconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_asbd</td><td>The ASBD that contains the relevant encoding information, e.g. number of channels, bit depth, sample rate. </td></tr>
    <tr><td class="paramname">in_number_of_seconds</td><td>The number of seconds that each buffer will represent. </td></tr>
    <tr><td class="paramname">out_bytes_per_buffer</td><td>The set number of bytes to put in each buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>noErr(0) if no error occurs or an appropriate error code. </dd></dl>

<p>Definition at line <a class="el" href="darwin__cahal__device_8c_source.html#l00708">708</a> of file <a class="el" href="darwin__cahal__device_8c_source.html">darwin_cahal_device.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="darwin__cahal__device_8h_a78478e68ba0079c6a4ff8f7f1bd37533_icgraph.png" border="0" usemap="#darwin__cahal__device_8h_a78478e68ba0079c6a4ff8f7f1bd37533_icgraph" alt=""/></div>
<map name="darwin__cahal__device_8h_a78478e68ba0079c6a4ff8f7f1bd37533_icgraph" id="darwin__cahal__device_8h_a78478e68ba0079c6a4ff8f7f1bd37533_icgraph">
<area shape="rect" id="node2" href="darwin__cahal__device_8h.html#a7080994b4cb4f50629509cccf4346546" title="Allocates the necessary audio queue buffers and populates the queue with them. " alt="" coords="216,5,375,44"/>
<area shape="rect" id="node4" href="darwin__cahal__device_8h.html#a19914cf2a88212c7b7e531eb872a85f6" title="Allocates the necessary audio queue buffers and populates the queue with them. This function will cal..." alt="" coords="212,68,379,107"/>
<area shape="rect" id="node3" href="darwin__cahal__device_8c.html#aec6bf662a89cae02dcb40d0a36336343" title="The entry point into the CAHAL library to start recording. The caller is responsible for supplying al..." alt="" coords="427,12,577,37"/>
<area shape="rect" id="node5" href="darwin__cahal__device_8c.html#a659d2afa28a2eee575c238ae2c54a90f" title="The entry point into the CAHAL library to start playback. The caller is responsible for supplying all..." alt="" coords="429,75,575,100"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa7f707d631530f0be6a85538085e66b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OSStatus darwin_configure_asbd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cahal__audio__format__description_8h.html#a99cb016efcedca0bb122fd85f60e888a">cahal_audio_format_id</a>&#160;</td>
          <td class="paramname"><em>in_format_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>in_number_of_channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64&#160;</td>
          <td class="paramname"><em>in_sample_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>in_bit_depth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cahal_audio_format_flag&#160;</td>
          <td class="paramname"><em>in_format_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cahal__device__stream_8h.html#a704050c453a1c595e0e3bbfd1a096cab">cahal_device_stream_direction</a>&#160;</td>
          <td class="paramname"><em>in_direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AudioStreamBasicDescription *&#160;</td>
          <td class="paramname"><em>out_asbd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to create the AudioStreamBasicDescrition. This is the platform specific model that is populated with the format information and parameters. The ASBD is used in both input and output operations. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_format_id</td><td>The CAHAL format that the samples will be encoded in for playback/recording, e.g. lpcm. </td></tr>
    <tr><td class="paramname">in_number_of_channels</td><td>The number of channels in the stream. </td></tr>
    <tr><td class="paramname">in_sample_rate</td><td>The number of samples to capture per second. </td></tr>
    <tr><td class="paramname">in_bit_depth</td><td>The quantization level, i.e. the number of bits per sample. </td></tr>
    <tr><td class="paramname">in_format_flags</td><td>Flags to further describe the encoding method. These flags are CAHAL flags. </td></tr>
    <tr><td class="paramname">in_direction</td><td>The direction the ASBD is being built for, i.e. input or output. </td></tr>
    <tr><td class="paramname">out_asbd</td><td>The newly populated ASBD if no error occurs. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="darwin__cahal__device_8c_source.html#l01025">1025</a> of file <a class="el" href="darwin__cahal__device_8c_source.html">darwin_cahal_device.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="darwin__cahal__device_8h_aa7f707d631530f0be6a85538085e66b3_cgraph.png" border="0" usemap="#darwin__cahal__device_8h_aa7f707d631530f0be6a85538085e66b3_cgraph" alt=""/></div>
<map name="darwin__cahal__device_8h_aa7f707d631530f0be6a85538085e66b3_cgraph" id="darwin__cahal__device_8h_aa7f707d631530f0be6a85538085e66b3_cgraph">
<area shape="rect" id="node2" href="darwin__cahal__audio__format__flags_8c.html#adb312d455b2b582f8f3683bf22dc0c4c" title="Converts CAHAL format flags to platform specific flags. Note that the platform agnostic CAHAL flags d..." alt="" coords="213,5,388,57"/>
<area shape="rect" id="node3" href="darwin__cahal__audio__format__description_8c.html#a764e822e29d0d1ff389aad1228bb1bf5" title="This function maps cahal audio format constants back to the platform specific constants supported by ..." alt="" coords="213,81,389,133"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="darwin__cahal__device_8h_aa7f707d631530f0be6a85538085e66b3_icgraph.png" border="0" usemap="#darwin__cahal__device_8h_aa7f707d631530f0be6a85538085e66b3_icgraph" alt=""/></div>
<map name="darwin__cahal__device_8h_aa7f707d631530f0be6a85538085e66b3_icgraph" id="darwin__cahal__device_8h_aa7f707d631530f0be6a85538085e66b3_icgraph">
<area shape="rect" id="node2" href="darwin__cahal__device_8c.html#a659d2afa28a2eee575c238ae2c54a90f" title="The entry point into the CAHAL library to start playback. The caller is responsible for supplying all..." alt="" coords="225,5,372,31"/>
<area shape="rect" id="node3" href="darwin__cahal__device_8c.html#aec6bf662a89cae02dcb40d0a36336343" title="The entry point into the CAHAL library to start recording. The caller is responsible for supplying al..." alt="" coords="224,55,373,80"/>
<area shape="rect" id="node4" href="ios__cahal__device__stream_8c.html#a467f9a4f75bd92c6a24eebacaab6bcdf" title="Determines the audio formats that are supported by the hardware running iOS. " alt="" coords="213,104,384,143"/>
<area shape="rect" id="node5" href="ios__cahal__device_8h.html#a767c85018ae3765339ba25ea60990eb7" title="Configures the default input/output stream depending on in_direction This function sets the minimum f..." alt="" coords="432,111,590,136"/>
<area shape="rect" id="node6" href="ios__cahal__device_8h.html#ac5c2461e02b1909f44620386c0578192" title="Mallocs and populates a newly created cahal_device struct. Note that the returned structure is an arr..." alt="" coords="638,104,787,143"/>
<area shape="rect" id="node7" href="ios__cahal_8c.html#a1c0a250dc3fd364f23fe2e3962e0570f" title="Instantiates a list of audio input/output devices in a platform&#45; agnostic way. " alt="" coords="835,111,984,136"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adc68411bd69aa34e1fa7eb38b781e47b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OSStatus darwin_configure_input_audio_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *&#160;</td>
          <td class="paramname"><em>in_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcahal__recorder__info__t.html">cahal_recorder_info</a> *&#160;</td>
          <td class="paramname"><em>in_callback_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AudioStreamBasicDescription *&#160;</td>
          <td class="paramname"><em>io_asbd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AudioQueueRef *&#160;</td>
          <td class="paramname"><em>out_audio_queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the platforms input (record) audio queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_device</td><td>The recording device. </td></tr>
    <tr><td class="paramname">in_callback_info</td><td>The callback that is called by the system when a buffer of samples is ready for processing. </td></tr>
    <tr><td class="paramname">io_asbd</td><td>The ASDB containing all the format and endocing information. This value is somteimes updated by the queue when format parameters are changed. </td></tr>
    <tr><td class="paramname">out_audio_queue</td><td>The newly created platform-specific audio queue. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>noErr(0) if no error occurs or an appropriate error code. </dd></dl>

<p>Definition at line <a class="el" href="darwin__cahal__device_8c_source.html#l00915">915</a> of file <a class="el" href="darwin__cahal__device_8c_source.html">darwin_cahal_device.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="darwin__cahal__device_8h_adc68411bd69aa34e1fa7eb38b781e47b_icgraph.png" border="0" usemap="#darwin__cahal__device_8h_adc68411bd69aa34e1fa7eb38b781e47b_icgraph" alt=""/></div>
<map name="darwin__cahal__device_8h_adc68411bd69aa34e1fa7eb38b781e47b_icgraph" id="darwin__cahal__device_8h_adc68411bd69aa34e1fa7eb38b781e47b_icgraph">
<area shape="rect" id="node2" href="darwin__cahal__device_8c.html#aec6bf662a89cae02dcb40d0a36336343" title="The entry point into the CAHAL library to start recording. The caller is responsible for supplying al..." alt="" coords="213,12,362,37"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7080994b4cb4f50629509cccf4346546"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OSStatus darwin_configure_input_audio_queue_buffer </td>
          <td>(</td>
          <td class="paramtype">AudioStreamBasicDescription *&#160;</td>
          <td class="paramname"><em>in_asbd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="darwin__cahal__device_8h.html#a2b2519790de6b0f515705a4fb050c1c3">darwin_context</a> *&#160;</td>
          <td class="paramname"><em>out_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AudioQueueRef&#160;</td>
          <td class="paramname"><em>io_audio_queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates the necessary audio queue buffers and populates the queue with them. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_asbd</td><td>The ASBD containing the format and encoding information. </td></tr>
    <tr><td class="paramname">out_context</td><td>Structure that stores references to the queue and buffers so that they can be released. This function sets the buffers in out_context. </td></tr>
    <tr><td class="paramname">io_audio_queue</td><td>The audio queue that is populated with buffers. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="darwin__cahal__device_8c_source.html#l00622">622</a> of file <a class="el" href="darwin__cahal__device_8c_source.html">darwin_cahal_device.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="darwin__cahal__device_8h_a7080994b4cb4f50629509cccf4346546_cgraph.png" border="0" usemap="#darwin__cahal__device_8h_a7080994b4cb4f50629509cccf4346546_cgraph" alt=""/></div>
<map name="darwin__cahal__device_8h_a7080994b4cb4f50629509cccf4346546_cgraph" id="darwin__cahal__device_8h_a7080994b4cb4f50629509cccf4346546_cgraph">
<area shape="rect" id="node2" href="darwin__cahal__device_8c.html#a78478e68ba0079c6a4ff8f7f1bd37533" title="Helper function to calculate number of bytes to put in each buffer based on the configured ASBD and i..." alt="" coords="213,5,371,44"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="darwin__cahal__device_8h_a7080994b4cb4f50629509cccf4346546_icgraph.png" border="0" usemap="#darwin__cahal__device_8h_a7080994b4cb4f50629509cccf4346546_icgraph" alt=""/></div>
<map name="darwin__cahal__device_8h_a7080994b4cb4f50629509cccf4346546_icgraph" id="darwin__cahal__device_8h_a7080994b4cb4f50629509cccf4346546_icgraph">
<area shape="rect" id="node2" href="darwin__cahal__device_8c.html#aec6bf662a89cae02dcb40d0a36336343" title="The entry point into the CAHAL library to start recording. The caller is responsible for supplying al..." alt="" coords="213,12,362,37"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad55eee5f011b9761823ec6901c000ddc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OSStatus darwin_configure_output_audio_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *&#160;</td>
          <td class="paramname"><em>in_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cahal__device_8h.html#a15208bec2f5c3e8dce404a8c40a66c36">cahal_playback_info</a> *&#160;</td>
          <td class="paramname"><em>in_callback_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT32&#160;</td>
          <td class="paramname"><em>in_volume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AudioStreamBasicDescription *&#160;</td>
          <td class="paramname"><em>in_asbd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AudioQueueRef *&#160;</td>
          <td class="paramname"><em>out_audio_queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the platforms ouput (playback) audio queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_device</td><td>The playback device. </td></tr>
    <tr><td class="paramname">in_callback_info</td><td>The callback that is called by the system when a buffer of samples needs to be filled. </td></tr>
    <tr><td class="paramname">in_volume</td><td>Volume gain (value between 0 and 1). This attenuates the output signal but is still subject to the max volume of the device. </td></tr>
    <tr><td class="paramname">in_asbd</td><td>The ASDB containing all the format and endocing information. </td></tr>
    <tr><td class="paramname">out_audio_queue</td><td>The newly created platform-specific audio queue. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>noErr(0) if no error occurs or an appropriate error code. </dd></dl>

<p>Definition at line <a class="el" href="darwin__cahal__device_8c_source.html#l00816">816</a> of file <a class="el" href="darwin__cahal__device_8c_source.html">darwin_cahal_device.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="darwin__cahal__device_8h_ad55eee5f011b9761823ec6901c000ddc_icgraph.png" border="0" usemap="#darwin__cahal__device_8h_ad55eee5f011b9761823ec6901c000ddc_icgraph" alt=""/></div>
<map name="darwin__cahal__device_8h_ad55eee5f011b9761823ec6901c000ddc_icgraph" id="darwin__cahal__device_8h_ad55eee5f011b9761823ec6901c000ddc_icgraph">
<area shape="rect" id="node2" href="darwin__cahal__device_8c.html#a659d2afa28a2eee575c238ae2c54a90f" title="The entry point into the CAHAL library to start playback. The caller is responsible for supplying all..." alt="" coords="221,12,367,37"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a19914cf2a88212c7b7e531eb872a85f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OSStatus darwin_configure_output_audio_queue_buffer </td>
          <td>(</td>
          <td class="paramtype">AudioStreamBasicDescription *&#160;</td>
          <td class="paramname"><em>in_asbd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cahal__device_8h.html#a15208bec2f5c3e8dce404a8c40a66c36">cahal_playback_info</a> *&#160;</td>
          <td class="paramname"><em>in_playback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="darwin__cahal__device_8h.html#a2b2519790de6b0f515705a4fb050c1c3">darwin_context</a> *&#160;</td>
          <td class="paramname"><em>out_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AudioQueueRef&#160;</td>
          <td class="paramname"><em>io_audio_queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates the necessary audio queue buffers and populates the queue with them. This function will call the playback callback to initially populate the buffer queue with data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_asbd</td><td>The ASBD containing the format and encoding information. </td></tr>
    <tr><td class="paramname">in_playback</td><td>The user data struct containing device specific info required by the playback callback. </td></tr>
    <tr><td class="paramname">out_context</td><td>Structure that stores references to the queue and buffers so that they can be released. This function sets the buffers in out_context. </td></tr>
    <tr><td class="paramname">io_audio_queue</td><td>The audio queue that is populated with buffers. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="darwin__cahal__device_8c_source.html#l00746">746</a> of file <a class="el" href="darwin__cahal__device_8c_source.html">darwin_cahal_device.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="darwin__cahal__device_8h_a19914cf2a88212c7b7e531eb872a85f6_cgraph.png" border="0" usemap="#darwin__cahal__device_8h_a19914cf2a88212c7b7e531eb872a85f6_cgraph" alt=""/></div>
<map name="darwin__cahal__device_8h_a19914cf2a88212c7b7e531eb872a85f6_cgraph" id="darwin__cahal__device_8h_a19914cf2a88212c7b7e531eb872a85f6_cgraph">
<area shape="rect" id="node2" href="darwin__cahal__device_8c.html#a78478e68ba0079c6a4ff8f7f1bd37533" title="Helper function to calculate number of bytes to put in each buffer based on the configured ASBD and i..." alt="" coords="221,5,379,44"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="darwin__cahal__device_8h_a19914cf2a88212c7b7e531eb872a85f6_icgraph.png" border="0" usemap="#darwin__cahal__device_8h_a19914cf2a88212c7b7e531eb872a85f6_icgraph" alt=""/></div>
<map name="darwin__cahal__device_8h_a19914cf2a88212c7b7e531eb872a85f6_icgraph" id="darwin__cahal__device_8h_a19914cf2a88212c7b7e531eb872a85f6_icgraph">
<area shape="rect" id="node2" href="darwin__cahal__device_8c.html#a659d2afa28a2eee575c238ae2c54a90f" title="The entry point into the CAHAL library to start playback. The caller is responsible for supplying all..." alt="" coords="221,12,367,37"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6e7e4e383efa6218f944cb80201bd970"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OSStatus darwin_free_context </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="darwin__cahal__device_8h.html#a2b2519790de6b0f515705a4fb050c1c3">darwin_context</a> *&#160;</td>
          <td class="paramname"><em>io_context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees all the structs in io_context. Releases the audio queue and buffers back to the OS using the AudioQueue* API. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_context</td><td>The audio queue and audio queue buffers to free. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>noErr(0) if all structs are freed, an appropriate error code otherwise. </dd></dl>

<p>Definition at line <a class="el" href="darwin__cahal__device_8c_source.html#l00364">364</a> of file <a class="el" href="darwin__cahal__device_8c_source.html">darwin_cahal_device.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="darwin__cahal__device_8h_a6e7e4e383efa6218f944cb80201bd970_icgraph.png" border="0" usemap="#darwin__cahal__device_8h_a6e7e4e383efa6218f944cb80201bd970_icgraph" alt=""/></div>
<map name="darwin__cahal__device_8h_a6e7e4e383efa6218f944cb80201bd970_icgraph" id="darwin__cahal__device_8h_a6e7e4e383efa6218f944cb80201bd970_icgraph">
<area shape="rect" id="node2" href="darwin__cahal__device_8c.html#a30cb2441ebd6aaa5ca0c42b371bd1828" title="Calling this function will stop playback and free all structures related to the playback to the OS..." alt="" coords="196,5,342,31"/>
<area shape="rect" id="node3" href="darwin__cahal__device_8c.html#a662559b543a161142d22fcc81151e275" title="Calling this function will stop recording and free all structures related to the recording back to th..." alt="" coords="195,55,344,80"/>
</map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b0856f6b0d80ccb263b2f415c91f9e17.html">include</a></li><li class="navelem"><a class="el" href="dir_0fb9cd1ce9a4e6cf5f0345e10ced9ea9.html">darwin</a></li><li class="navelem"><a class="el" href="darwin__cahal__device_8h.html">darwin_cahal_device.h</a></li>
    <li class="footer">Generated on Fri Apr 1 2016 09:45:22 for CAHAL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
