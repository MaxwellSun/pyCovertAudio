<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>CAHAL: src/windows/windows_cahal_device.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CAHAL
   </div>
   <div id="projectbrief">Cross-platform audio hardware abstraction library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('windows__cahal__device_8cpp.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">windows_cahal_device.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation that queries the underlying Windows hardware and creates the device_list struct.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="windows__cahal__device_8hpp_source.html">windows/windows_cahal_device.hpp</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for windows_cahal_device.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp__incl.png" border="0" usemap="#src_2windows_2windows__cahal__device_8cpp" alt=""/></div>
<map name="src_2windows_2windows__cahal__device_8cpp" id="src_2windows_2windows__cahal__device_8cpp">
<area shape="rect" id="node2" href="windows__cahal__device_8hpp.html" title="All APIs related to querying the underlying audio IO hardware are in this file. " alt="" coords="350,92,516,131"/>
<area shape="rect" id="node8" href="cahal_8h.html" title="This is the only header that an external library/binary should have include. Provides a cross&#45;platfor..." alt="" coords="365,265,429,291"/>
<area shape="rect" id="node10" href="cahal__device_8h.html" title="The platform agnostic CAHAL device struct is defined in this file. All helper functions that are impl..." alt="" coords="328,339,439,364"/>
<area shape="rect" id="node14" href="windows__cahal__device__stream_8hpp.html" title="Function prototypes for functions related to querying the underlying hardware for supported device st..." alt="" coords="134,179,292,217"/>
<area shape="rect" id="node11" href="cahal__audio__format__flags_8h.html" title="List of platform agnostic audio format flags and helper functions to display their value..." alt="" coords="421,412,559,451"/>
<area shape="rect" id="node12" href="cahal__audio__format__description_8h.html" title="All constants, typedefs and functions related to audio formats and sample rates are defined in this f..." alt="" coords="208,499,346,537"/>
<area shape="rect" id="node13" href="cahal__device__stream_8h.html" title="All cahal_device_stream structs and typedefs are defined in this file. All functions related to the s..." alt="" coords="87,419,245,444"/>
</map>
</div>
</div>
<p><a href="windows__cahal__device_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structwindows__context__t.html">windows_context_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdata__handler__t.html">data_handler_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6d5dd4c954523888044c36c59490f924"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6d5dd4c954523888044c36c59490f924"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a6d5dd4c954523888044c36c59490f924">LABEL_CAPTURE</a>&#160;&#160;&#160;&quot;captur&quot;</td></tr>
<tr class="memdesc:a6d5dd4c954523888044c36c59490f924"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug label for the capture (mic controlling) thread. <br /></td></tr>
<tr class="separator:a6d5dd4c954523888044c36c59490f924"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6964afd74a1594feb883134e0bfe7c55"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6964afd74a1594feb883134e0bfe7c55"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a6964afd74a1594feb883134e0bfe7c55">LABEL_RENDER</a>&#160;&#160;&#160;&quot;render&quot;</td></tr>
<tr class="memdesc:a6964afd74a1594feb883134e0bfe7c55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug label for the capture (speaker controlling) thread. <br /></td></tr>
<tr class="separator:a6964afd74a1594feb883134e0bfe7c55"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a63beea5a89a4e142095f24788280022d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a63beea5a89a4e142095f24788280022d"></a>
typedef struct <a class="el" href="structwindows__context__t.html">windows_context_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a63beea5a89a4e142095f24788280022d">windows_context</a></td></tr>
<tr class="memdesc:a63beea5a89a4e142095f24788280022d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Context struct for Windows. Contains a pointer to the WASAPI object required to manipulate the audio device (audio_client) as well as format information on the format of the audio being recorded or played back. <br /></td></tr>
<tr class="separator:a63beea5a89a4e142095f24788280022d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a470fb76c41e48e05e8ed3a27a5ac20b6"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a470fb76c41e48e05e8ed3a27a5ac20b6">windows_data_handler_routine</a>) (void *in_callback_info)</td></tr>
<tr class="memdesc:a470fb76c41e48e05e8ed3a27a5ac20b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback called when data is available for recording or data is required for playback.  <a href="#a470fb76c41e48e05e8ed3a27a5ac20b6">More...</a><br /></td></tr>
<tr class="separator:a470fb76c41e48e05e8ed3a27a5ac20b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc03964fdd1b5d44e28ab7d97742932b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adc03964fdd1b5d44e28ab7d97742932b"></a>
typedef struct <a class="el" href="structdata__handler__t.html">data_handler_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#adc03964fdd1b5d44e28ab7d97742932b">data_handler</a></td></tr>
<tr class="memdesc:adc03964fdd1b5d44e28ab7d97742932b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct used to pass information to the windows_data_handler_routine. <br /></td></tr>
<tr class="separator:adc03964fdd1b5d44e28ab7d97742932b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a56fbdce3a8984a291fe214f0c2e6ea85"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a56fbdce3a8984a291fe214f0c2e6ea85">windows_get_device_list</a> (void)</td></tr>
<tr class="memdesc:a56fbdce3a8984a291fe214f0c2e6ea85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enumerates the audio IO devices and creates the device list struct.  <a href="#a56fbdce3a8984a291fe214f0c2e6ea85">More...</a><br /></td></tr>
<tr class="separator:a56fbdce3a8984a291fe214f0c2e6ea85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a923f772fe81355016a931174347732ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a923f772fe81355016a931174347732ab">windows_playback_send_data</a> (IAudioClient *in_audio_client, IAudioRenderClient *in_render_client, WAVEFORMATEX *in_format, <a class="el" href="cahal__device_8h.html#a15208bec2f5c3e8dce404a8c40a66c36">cahal_playback_info</a> *in_callback_info)</td></tr>
<tr class="memdesc:a923f772fe81355016a931174347732ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls the callback to get a buffer of data and passes the data to the render client.  <a href="#a923f772fe81355016a931174347732ab">More...</a><br /></td></tr>
<tr class="separator:a923f772fe81355016a931174347732ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6a281e4ad81b541aa592d21a85df021"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#ae6a281e4ad81b541aa592d21a85df021">windows_configure_format</a> (UINT32 in_number_of_channels, FLOAT64 in_sample_rate, UINT32 in_bit_depth, WAVEFORMATEX **out_format)</td></tr>
<tr class="memdesc:ae6a281e4ad81b541aa592d21a85df021"><td class="mdescLeft">&#160;</td><td class="mdescRight">Malloc's a new format struct (out_format) and appropriately sets its parameters.  <a href="#ae6a281e4ad81b541aa592d21a85df021">More...</a><br /></td></tr>
<tr class="separator:ae6a281e4ad81b541aa592d21a85df021"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacf83db7f16a45cb6609e8064b9a5b3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#aacf83db7f16a45cb6609e8064b9a5b3e">windows_handle_playback_data</a> (<a class="el" href="cahal__device_8h.html#a15208bec2f5c3e8dce404a8c40a66c36">cahal_playback_info</a> *in_callback_info)</td></tr>
<tr class="memdesc:aacf83db7f16a45cb6609e8064b9a5b3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the playback thread when signaled that a new capture buffer is required. This function will get the capture client and have to set a buffer full of data as set by the callback in in_callback_info.  <a href="#aacf83db7f16a45cb6609e8064b9a5b3e">More...</a><br /></td></tr>
<tr class="separator:aacf83db7f16a45cb6609e8064b9a5b3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e0132cf8004b580fb376e66af0a4e45"><td class="memItemLeft" align="right" valign="top">CPC_BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a6e0132cf8004b580fb376e66af0a4e45">windows_stop_thread</a> (PHANDLE io_terminate_event, PHANDLE io_thread)</td></tr>
<tr class="memdesc:a6e0132cf8004b580fb376e66af0a4e45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the terminate event and waits for io_thread to complete.  <a href="#a6e0132cf8004b580fb376e66af0a4e45">More...</a><br /></td></tr>
<tr class="separator:a6e0132cf8004b580fb376e66af0a4e45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6259169fe3be10ca5d1d6d434f57f068"><td class="memItemLeft" align="right" valign="top">DWORD WINAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a6259169fe3be10ca5d1d6d434f57f068">windows_thread_entry</a> (LPVOID in_handler_info)</td></tr>
<tr class="memdesc:a6259169fe3be10ca5d1d6d434f57f068"><td class="mdescLeft">&#160;</td><td class="mdescRight">Entry point for the processing threads. This function will block on the data ready and terminate events and handle them when signalled. When the terminate event is signalled the thread will exit.  <a href="#a6259169fe3be10ca5d1d6d434f57f068">More...</a><br /></td></tr>
<tr class="separator:a6259169fe3be10ca5d1d6d434f57f068"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e98e532653647e9ac3243292757ddd0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a6e98e532653647e9ac3243292757ddd0">windows_recorder_read_data</a> (IAudioCaptureClient *in_capture_client, WAVEFORMATEX *in_format, <a class="el" href="structcahal__recorder__info__t.html">cahal_recorder_info</a> *in_callback_info)</td></tr>
<tr class="memdesc:a6e98e532653647e9ac3243292757ddd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a buffer full of data from the capture hardware and makes the data available to the callback.  <a href="#a6e98e532653647e9ac3243292757ddd0">More...</a><br /></td></tr>
<tr class="separator:a6e98e532653647e9ac3243292757ddd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34c215d71990b84f5939fa681ec3f4f6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a34c215d71990b84f5939fa681ec3f4f6"></a>
HRESULT&#160;</td><td class="memItemRight" valign="bottom"><b>windows_initialize_events_thread</b> (IAudioClient *io_audio_client, void *in_callback_info, PHANDLE out_data_ready_event, PHANDLE out_terminate_event, PHANDLE out_thread, <a class="el" href="windows__cahal__device_8cpp.html#a470fb76c41e48e05e8ed3a27a5ac20b6">windows_data_handler_routine</a> in_data_handler_routine, CHAR *in_label)</td></tr>
<tr class="separator:a34c215d71990b84f5939fa681ec3f4f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1164d0af46511af5718ab1db53a14ab0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a1164d0af46511af5718ab1db53a14ab0">windows_handle_recorder_data</a> (<a class="el" href="structcahal__recorder__info__t.html">cahal_recorder_info</a> *in_callback_info)</td></tr>
<tr class="memdesc:a1164d0af46511af5718ab1db53a14ab0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the recording thread when signaled that a new capture buffer is ready. This function will get the capture client and read a buffer full of data from it then pass the data to the callback in in_callback_info.  <a href="#a1164d0af46511af5718ab1db53a14ab0">More...</a><br /></td></tr>
<tr class="separator:a1164d0af46511af5718ab1db53a14ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82c30f69909119ceb7c541fdc6fbfb00"><td class="memItemLeft" align="right" valign="top">HRESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a82c30f69909119ceb7c541fdc6fbfb00">windows_configure_device</a> (<a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *in_device, WAVEFORMATEX *in_format, IAudioClient **out_audio_client)</td></tr>
<tr class="memdesc:a82c30f69909119ceb7c541fdc6fbfb00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Entry point to configure the WASAPI to process audio samples. This function will enumerate the audio devices, select the appropriate device (using in_device-&gt;handle) and initialize an audio client to use for capture or render.  <a href="#a82c30f69909119ceb7c541fdc6fbfb00">More...</a><br /></td></tr>
<tr class="separator:a82c30f69909119ceb7c541fdc6fbfb00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a613df249994808f457e8d8acd5a246f6"><td class="memItemLeft" align="right" valign="top">HRESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a613df249994808f457e8d8acd5a246f6">windows_initialize_device</a> (IMMDevice *in_device, IAudioClient **io_audio_client, WAVEFORMATEX *in_format)</td></tr>
<tr class="memdesc:a613df249994808f457e8d8acd5a246f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Activates a new audio client from in_device and initializes it. Calling reinitialize if required.  <a href="#a613df249994808f457e8d8acd5a246f6">More...</a><br /></td></tr>
<tr class="separator:a613df249994808f457e8d8acd5a246f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59211b8012b34057dca29ffc4a093631"><td class="memItemLeft" align="right" valign="top">HRESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a59211b8012b34057dca29ffc4a093631">windows_reinitialize_device</a> (IMMDevice *in_device, IAudioClient **io_audio_client, WAVEFORMATEX *in_format)</td></tr>
<tr class="memdesc:a59211b8012b34057dca29ffc4a093631"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reinitializes the audio_client with a buffer size that is aligned to the block size in the format. This is required when devices are opened in exclusive mode (it is required to align the expected buffer size with the hardware buffer size).  <a href="#a59211b8012b34057dca29ffc4a093631">More...</a><br /></td></tr>
<tr class="separator:a59211b8012b34057dca29ffc4a093631"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ecbb8a1a28854dc0380a2b3b52d5d99"><td class="memItemLeft" align="right" valign="top">HRESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a6ecbb8a1a28854dc0380a2b3b52d5d99">windows_set_device_info</a> (<a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *out_device, IMMDevice *in_endpoint)</td></tr>
<tr class="memdesc:a6ecbb8a1a28854dc0380a2b3b52d5d99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets out_device's name, ID, and state by querying the hardware pointed to by in_endpoint. A call is made from this function to set the streams. Success is returned if this device has streams.  <a href="#a6ecbb8a1a28854dc0380a2b3b52d5d99">More...</a><br /></td></tr>
<tr class="separator:a6ecbb8a1a28854dc0380a2b3b52d5d99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02e4be615ef077d196997e905b7544c3"><td class="memItemLeft" align="right" valign="top">HRESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a02e4be615ef077d196997e905b7544c3">windows_set_device_defaults</a> (<a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *out_device, IMMDevice *in_endpoint)</td></tr>
<tr class="memdesc:a02e4be615ef077d196997e905b7544c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the preferred sample rate and number of channels for the device pointed to by in_endpoint.  <a href="#a02e4be615ef077d196997e905b7544c3">More...</a><br /></td></tr>
<tr class="separator:a02e4be615ef077d196997e905b7544c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a933e4ad4650240e144b12f2bad0e2201"><td class="memItemLeft" align="right" valign="top">HRESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a933e4ad4650240e144b12f2bad0e2201">windows_set_device_id</a> (<a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *out_device, IMMDevice *in_endpoint)</td></tr>
<tr class="memdesc:a933e4ad4650240e144b12f2bad0e2201"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the device's ID by querying the underlying hardware.  <a href="#a933e4ad4650240e144b12f2bad0e2201">More...</a><br /></td></tr>
<tr class="separator:a933e4ad4650240e144b12f2bad0e2201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc84d0c0bbfd976488f30a75736e8b4d"><td class="memItemLeft" align="right" valign="top">HRESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#afc84d0c0bbfd976488f30a75736e8b4d">windows_set_device_state</a> (<a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *out_device, IMMDevice *in_endpoint)</td></tr>
<tr class="memdesc:afc84d0c0bbfd976488f30a75736e8b4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the device's state (active or not) by querying the underlying hardware.  <a href="#afc84d0c0bbfd976488f30a75736e8b4d">More...</a><br /></td></tr>
<tr class="separator:afc84d0c0bbfd976488f30a75736e8b4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7274836c1ed466a49d60e0fbab7222d"><td class="memItemLeft" align="right" valign="top">HRESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#af7274836c1ed466a49d60e0fbab7222d">windows_set_device_name</a> (<a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *out_device, IMMDevice *in_endpoint)</td></tr>
<tr class="memdesc:af7274836c1ed466a49d60e0fbab7222d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the device's name by querying the underlying hardware.  <a href="#af7274836c1ed466a49d60e0fbab7222d">More...</a><br /></td></tr>
<tr class="separator:af7274836c1ed466a49d60e0fbab7222d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2f0a9b05fd917907b8c7c6b85e3ddc7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab2f0a9b05fd917907b8c7c6b85e3ddc7"></a>
HRESULT&#160;</td><td class="memItemRight" valign="bottom"><b>windows_set_volume</b> (<a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *in_device, FLOAT32 in_volume)</td></tr>
<tr class="separator:ab2f0a9b05fd917907b8c7c6b85e3ddc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec6bf662a89cae02dcb40d0a36336343"><td class="memItemLeft" align="right" valign="top">CPC_BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#aec6bf662a89cae02dcb40d0a36336343">cahal_start_recording</a> (<a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *in_device, <a class="el" href="cahal__audio__format__description_8h.html#a99cb016efcedca0bb122fd85f60e888a">cahal_audio_format_id</a> in_format_id, UINT32 in_number_of_channels, FLOAT64 in_sample_rate, UINT32 in_bit_depth, cahal_recorder_callback in_recorder, void *in_callback_user_data, cahal_audio_format_flag in_format_flags)</td></tr>
<tr class="memdesc:aec6bf662a89cae02dcb40d0a36336343"><td class="mdescLeft">&#160;</td><td class="mdescRight">The entry point into the CAHAL library to start recording. The caller is responsible for supplying all the necessary parameters. The most common reason for failure in this funtion is incorrect parameters. The caller is also responsible for supplying an appropriate callback which will receive a buffer of audio data per call back as well as any user data the caller wants when their callback is called.  <a href="#aec6bf662a89cae02dcb40d0a36336343">More...</a><br /></td></tr>
<tr class="separator:aec6bf662a89cae02dcb40d0a36336343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a662559b543a161142d22fcc81151e275"><td class="memItemLeft" align="right" valign="top">CPC_BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a662559b543a161142d22fcc81151e275">cahal_stop_recording</a> (void)</td></tr>
<tr class="memdesc:a662559b543a161142d22fcc81151e275"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calling this function will stop recording and free all structures related to the recording back to the OS. If no recording is taking place this function simply returns.  <a href="#a662559b543a161142d22fcc81151e275">More...</a><br /></td></tr>
<tr class="separator:a662559b543a161142d22fcc81151e275"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30cb2441ebd6aaa5ca0c42b371bd1828"><td class="memItemLeft" align="right" valign="top">CPC_BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a30cb2441ebd6aaa5ca0c42b371bd1828">cahal_stop_playback</a> (void)</td></tr>
<tr class="memdesc:a30cb2441ebd6aaa5ca0c42b371bd1828"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calling this function will stop playback and free all structures related to the playback to the OS. If no playback is taking place this function simply returns false.  <a href="#a30cb2441ebd6aaa5ca0c42b371bd1828">More...</a><br /></td></tr>
<tr class="separator:a30cb2441ebd6aaa5ca0c42b371bd1828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a320d749e1ba76110fd8842d96aadcece"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a320d749e1ba76110fd8842d96aadcece">cahal_sleep</a> (UINT32 in_sleep_time)</td></tr>
<tr class="memdesc:a320d749e1ba76110fd8842d96aadcece"><td class="mdescLeft">&#160;</td><td class="mdescRight">Platform-specific call to the sleep function. This method is only ever used for testing.  <a href="#a320d749e1ba76110fd8842d96aadcece">More...</a><br /></td></tr>
<tr class="separator:a320d749e1ba76110fd8842d96aadcece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a659d2afa28a2eee575c238ae2c54a90f"><td class="memItemLeft" align="right" valign="top">CPC_BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a659d2afa28a2eee575c238ae2c54a90f">cahal_start_playback</a> (<a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *in_device, <a class="el" href="cahal__audio__format__description_8h.html#a99cb016efcedca0bb122fd85f60e888a">cahal_audio_format_id</a> in_format_id, UINT32 in_number_of_channels, FLOAT64 in_sample_rate, UINT32 in_bit_depth, FLOAT32 in_volume, cahal_playback_callback in_playback, void *in_callback_user_data, cahal_audio_format_flag in_format_flags)</td></tr>
<tr class="memdesc:a659d2afa28a2eee575c238ae2c54a90f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The entry point into the CAHAL library to start playback. The caller is responsible for supplying all the necessary parameters. The most common reason for failure in this funtion is incorrect parameters. The caller is also responsible for supplying an appropriate callback which will receive an empty buffer that the callback is required to fill with audio samples as well as any user data the caller wants when their callback is called.  <a href="#a659d2afa28a2eee575c238ae2c54a90f">More...</a><br /></td></tr>
<tr class="separator:a659d2afa28a2eee575c238ae2c54a90f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a424468f39fa2f973fd644b7b7496d743"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a424468f39fa2f973fd644b7b7496d743"></a>
<a class="el" href="structcahal__recorder__info__t.html">cahal_recorder_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>g_recorder_callback_info</b> = NULL</td></tr>
<tr class="separator:a424468f39fa2f973fd644b7b7496d743"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a075349c7f20e5ba57a1f7979c4821d2f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a075349c7f20e5ba57a1f7979c4821d2f"></a>
<a class="el" href="cahal__device_8h.html#a15208bec2f5c3e8dce404a8c40a66c36">cahal_playback_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>g_playback_callback_info</b> = NULL</td></tr>
<tr class="separator:a075349c7f20e5ba57a1f7979c4821d2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4802c183e168c82e0a347dc806a5efb5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4802c183e168c82e0a347dc806a5efb5"></a>
HANDLE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a4802c183e168c82e0a347dc806a5efb5">g_recorder_thread</a> = NULL</td></tr>
<tr class="memdesc:a4802c183e168c82e0a347dc806a5efb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Windows thread used for recording. <br /></td></tr>
<tr class="separator:a4802c183e168c82e0a347dc806a5efb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d3930598b991b409b47b913c328c4ab"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5d3930598b991b409b47b913c328c4ab"></a>
HANDLE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a5d3930598b991b409b47b913c328c4ab">g_recorder_data_ready_event</a> = NULL</td></tr>
<tr class="memdesc:a5d3930598b991b409b47b913c328c4ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event set by the WASAPI when data is ready to be read. <br /></td></tr>
<tr class="separator:a5d3930598b991b409b47b913c328c4ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cdc3806e4c1d8becd8d9a37ba3c119b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9cdc3806e4c1d8becd8d9a37ba3c119b"></a>
HANDLE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a9cdc3806e4c1d8becd8d9a37ba3c119b">g_recorder_terminate_event</a> = NULL</td></tr>
<tr class="memdesc:a9cdc3806e4c1d8becd8d9a37ba3c119b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event set by CAHAL when the recording thread should terminate. <br /></td></tr>
<tr class="separator:a9cdc3806e4c1d8becd8d9a37ba3c119b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b064812f27c1da78e28706e8c636969"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b064812f27c1da78e28706e8c636969"></a>
HANDLE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a2b064812f27c1da78e28706e8c636969">g_playback_thread</a> = NULL</td></tr>
<tr class="memdesc:a2b064812f27c1da78e28706e8c636969"><td class="mdescLeft">&#160;</td><td class="mdescRight">Windows thread used for playback. <br /></td></tr>
<tr class="separator:a2b064812f27c1da78e28706e8c636969"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34d25dfec98c130e8bd10f1d089739d0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a34d25dfec98c130e8bd10f1d089739d0"></a>
HANDLE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#a34d25dfec98c130e8bd10f1d089739d0">g_playback_data_ready_event</a> = NULL</td></tr>
<tr class="memdesc:a34d25dfec98c130e8bd10f1d089739d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event set by the WASAPI when data is required for playback. <br /></td></tr>
<tr class="separator:a34d25dfec98c130e8bd10f1d089739d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa49d4e94fb9a1d5d3fbb3c1b7110e2c3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa49d4e94fb9a1d5d3fbb3c1b7110e2c3"></a>
HANDLE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="windows__cahal__device_8cpp.html#aa49d4e94fb9a1d5d3fbb3c1b7110e2c3">g_playback_terminate_event</a> = NULL</td></tr>
<tr class="memdesc:aa49d4e94fb9a1d5d3fbb3c1b7110e2c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event set by CAHAL when the playback thread should terminate. <br /></td></tr>
<tr class="separator:aa49d4e94fb9a1d5d3fbb3c1b7110e2c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation that queries the underlying Windows hardware and creates the device_list struct. </p>
<dl class="section author"><dt>Author</dt><dd>Brent Carrara </dd></dl>

<p>Definition in file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a470fb76c41e48e05e8ed3a27a5ac20b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">windows_data_handler_routine</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback called when data is available for recording or data is required for playback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_callback_info</td><td>Context containing the info required by the handler. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l00088">88</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a320d749e1ba76110fd8842d96aadcece"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cahal_sleep </td>
          <td>(</td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>in_sleep_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Platform-specific call to the sleep function. This method is only ever used for testing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_sleep_time</td><td>The amount of time (in milliseconds) to put the thread to sleep for. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l02054">2054</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a659d2afa28a2eee575c238ae2c54a90f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CPC_BOOL cahal_start_playback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *&#160;</td>
          <td class="paramname"><em>in_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cahal__audio__format__description_8h.html#a99cb016efcedca0bb122fd85f60e888a">cahal_audio_format_id</a>&#160;</td>
          <td class="paramname"><em>in_format_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>in_number_of_channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64&#160;</td>
          <td class="paramname"><em>in_sample_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>in_bit_depth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT32&#160;</td>
          <td class="paramname"><em>in_volume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cahal_playback_callback&#160;</td>
          <td class="paramname"><em>in_playback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>in_callback_user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cahal_audio_format_flag&#160;</td>
          <td class="paramname"><em>in_format_flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The entry point into the CAHAL library to start playback. The caller is responsible for supplying all the necessary parameters. The most common reason for failure in this funtion is incorrect parameters. The caller is also responsible for supplying an appropriate callback which will receive an empty buffer that the callback is required to fill with audio samples as well as any user data the caller wants when their callback is called. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_device</td><td>The device to playback to. </td></tr>
    <tr><td class="paramname">in_format_id</td><td>The audio format that samples are encoded in. </td></tr>
    <tr><td class="paramname">in_number_of_channels</td><td>The number of channels to use in the playback e.g. 1 = mono, 2 = stereo. </td></tr>
    <tr><td class="paramname">in_sample_rate</td><td>The sample rate to playback at. </td></tr>
    <tr><td class="paramname">in_bit_depth</td><td>The number of bits per sample to use (this is the quantization level). </td></tr>
    <tr><td class="paramname">in_volume</td><td>Volume gain (value between 0 and 1). This attenuates the output signal but is still subject to the max volume of the device. </td></tr>
    <tr><td class="paramname">in_playback</td><td>The caller-supplied callback to be called with empty buffers that need to be filled. </td></tr>
    <tr><td class="paramname">in_callback_user_data</td><td>The caller-supplied data to be passed back to the caller (unmodified) when their callback is called. </td></tr>
    <tr><td class="paramname">in_format_flags</td><td>The flags to be used in the playback. Note that these flags are converted back to the native OS' flags. The most common reason why recording fails is because these flags are incorrect, i.e. unsupported. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True iff playback has been start on in_device, false otherwise. </dd></dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l02062">2062</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a659d2afa28a2eee575c238ae2c54a90f_cgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a659d2afa28a2eee575c238ae2c54a90f_cgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a659d2afa28a2eee575c238ae2c54a90f_cgraph" id="windows__cahal__device_8cpp_a659d2afa28a2eee575c238ae2c54a90f_cgraph">
<area shape="rect" id="node2" href="cahal__device_8c.html#a3eea0695d4d20950fae64c6b7f84b055" title="Tests to see if in_device is capable of supporting input or output depending on the value of in_direc..." alt="" coords="214,59,400,97"/>
<area shape="rect" id="node3" href="android__cahal__device_8c.html#a4ec9fe76c1895f89856781e761be4dcd" title="Helper function to fill the neccessary data structures required by the OpenSLES framework for playbac..." alt="" coords="243,121,371,160"/>
<area shape="rect" id="node7" href="android__cahal__device_8c.html#a59144af5d31100488264433d47aa5999" title="Configures the OpenSLES playback object, interface and output buffer queue. " alt="" coords="218,184,395,209"/>
<area shape="rect" id="node9" href="android__cahal__device_8c.html#af22c1255bf98e2eddce9998987065c51" title="Registers a callback function to be called when more samples are required by the OS. " alt="" coords="218,233,395,272"/>
<area shape="rect" id="node11" href="android__cahal__device_8c.html#a24a3595bcd710a678c3fafbaca4202fd" title="Allocate, populate and enqueue buffers onto the OpenSLES buffer. " alt="" coords="214,296,399,335"/>
<area shape="rect" id="node13" href="android__cahal__device_8c.html#a27490822293542d1f7f38b2c073a64b2" title="Stores the platform&#45;specific structs in the global playback struct. " alt="" coords="226,359,387,397"/>
<area shape="rect" id="node14" href="windows__cahal__device_8cpp.html#ae6a281e4ad81b541aa592d21a85df021" title="Malloc&#39;s a new format struct (out_format) and appropriately sets its parameters. " alt="" coords="217,421,397,447"/>
<area shape="rect" id="node15" href="windows__cahal__device_8cpp.html#a82c30f69909119ceb7c541fdc6fbfb00" title="Entry point to configure the WASAPI to process audio samples. This function will enumerate the audio ..." alt="" coords="216,471,397,496"/>
<area shape="rect" id="node18" href="windows__cahal__device_8cpp.html#aacf83db7f16a45cb6609e8064b9a5b3e" title="Called by the playback thread when signaled that a new capture buffer is required. This function will get the capture client and have to set a buffer full of data as set by the callback in in_callback_info. " alt="" coords="200,521,413,547"/>
<area shape="rect" id="node4" href="android__cahal_8c.html#a2adf261da6eae23641d7bc3fcb433464" title="Create a new audio format struct with the given parameters. " alt="" coords="474,5,650,44"/>
<area shape="rect" id="node5" href="android__cahal_8c.html#abd2674b0579d973e1f2351bac06d0c5a" title="Generates a new output source (buffer queue) " alt="" coords="485,68,640,107"/>
<area shape="rect" id="node6" href="android__cahal_8c.html#a4db07269c7949e373a85c63f943cf35f" title="Generates a new output sink (speaker) " alt="" coords="469,131,655,156"/>
<area shape="rect" id="node8" href="android__cahal__device_8c.html#a522a197657372601a96978e955201b19" title="Sets the volume of the playback object to in_volume. " alt="" coords="473,180,652,219"/>
<area shape="rect" id="node10" href="android__cahal__device_8c.html#a442f0c20a7d331ee58310dd7f6a53c01" title="Callback called when a full buffer of samples is needed for playback. This is the interface for Andro..." alt="" coords="472,244,653,269"/>
<area shape="rect" id="node12" href="android__cahal__device_8c.html#ade42711a1ee086d09cc9c9d27125b22c" title="Computes the number of bytes in an audio buffer passed on the audio format being used and the number ..." alt="" coords="481,296,644,335"/>
<area shape="rect" id="node16" href="windows__cahal__device_8cpp.html#a613df249994808f457e8d8acd5a246f6" title="Activates a new audio client from in_device and initializes it. Calling reinitialize if required..." alt="" coords="499,461,626,500"/>
<area shape="rect" id="node17" href="windows__cahal__device_8cpp.html#a59211b8012b34057dca29ffc4a093631" title="Reinitializes the audio_client with a buffer size that is aligned to the block size in the format..." alt="" coords="711,461,851,500"/>
<area shape="rect" id="node19" href="windows__cahal__device_8cpp.html#a923f772fe81355016a931174347732ab" title="Calls the callback to get a buffer of data and passes the data to the render client. " alt="" coords="461,524,663,549"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aec6bf662a89cae02dcb40d0a36336343"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CPC_BOOL cahal_start_recording </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *&#160;</td>
          <td class="paramname"><em>in_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cahal__audio__format__description_8h.html#a99cb016efcedca0bb122fd85f60e888a">cahal_audio_format_id</a>&#160;</td>
          <td class="paramname"><em>in_format_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>in_number_of_channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64&#160;</td>
          <td class="paramname"><em>in_sample_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>in_bit_depth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cahal_recorder_callback&#160;</td>
          <td class="paramname"><em>in_recorder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>in_callback_user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cahal_audio_format_flag&#160;</td>
          <td class="paramname"><em>in_format_flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The entry point into the CAHAL library to start recording. The caller is responsible for supplying all the necessary parameters. The most common reason for failure in this funtion is incorrect parameters. The caller is also responsible for supplying an appropriate callback which will receive a buffer of audio data per call back as well as any user data the caller wants when their callback is called. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_device</td><td>The device to record from. </td></tr>
    <tr><td class="paramname">in_format_id</td><td>The audio format to record in. </td></tr>
    <tr><td class="paramname">in_number_of_channels</td><td>The number of channels to use in the recording e.g. 1 = mono, 2 = stereo. </td></tr>
    <tr><td class="paramname">in_sample_rate</td><td>The sample rate to record at. </td></tr>
    <tr><td class="paramname">in_bit_depth</td><td>The number of bits per sample to use (this is the quantization level). </td></tr>
    <tr><td class="paramname">in_recorder</td><td>The caller-supplied callback to be called with populated buffers of recorded data are available. </td></tr>
    <tr><td class="paramname">in_callback_user_data</td><td>The caller-supplied data to be passed back to the caller (unmodified) when their callback is called. </td></tr>
    <tr><td class="paramname">in_format_flags</td><td>The flags to be used in the recording. Note that these flags are converted back to the native OS' flags. The most common reason why recording fails is because these flags are incorrect, i.e. unsupported. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True iff recording has been start on in_device, false otherwise. </dd></dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l01757">1757</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_aec6bf662a89cae02dcb40d0a36336343_cgraph.png" border="0" usemap="#windows__cahal__device_8cpp_aec6bf662a89cae02dcb40d0a36336343_cgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_aec6bf662a89cae02dcb40d0a36336343_cgraph" id="windows__cahal__device_8cpp_aec6bf662a89cae02dcb40d0a36336343_cgraph">
<area shape="rect" id="node2" href="cahal__device_8c.html#a3eea0695d4d20950fae64c6b7f84b055" title="Tests to see if in_device is capable of supporting input or output depending on the value of in_direc..." alt="" coords="215,51,401,89"/>
<area shape="rect" id="node3" href="android__cahal__device_8c.html#a9e18f4301f713bb503e124da346e23d4" title="Helper function to fill the necessary data structures required by the OpenSLES framework for recordin..." alt="" coords="243,113,374,152"/>
<area shape="rect" id="node7" href="android__cahal__device_8c.html#a5ecf268e7134eeacbf1579ceb5d1b2f5" title="Configures the OpenSLES recorder object, interface and output buffer queue. " alt="" coords="221,176,395,201"/>
<area shape="rect" id="node9" href="android__cahal__device_8c.html#a5d1d4c4063e09528e9c9c063073d7eae" title="Registers a callback function to be called when a buffer is full. " alt="" coords="221,225,395,264"/>
<area shape="rect" id="node11" href="android__cahal__device_8c.html#a99bf385af08368ad8f3e193ba9a7270b" title="Allocate and enqueue buffers onto the OpenSLES buffer. " alt="" coords="223,288,393,327"/>
<area shape="rect" id="node13" href="android__cahal__device_8c.html#a0edd3c742403ae3c127caafa9ac7ec8c" title="Stores the platform&#45;specific structs in the global record struct. " alt="" coords="226,351,390,389"/>
<area shape="rect" id="node14" href="windows__cahal__device_8cpp.html#ae6a281e4ad81b541aa592d21a85df021" title="Malloc&#39;s a new format struct (out_format) and appropriately sets its parameters. " alt="" coords="218,413,398,439"/>
<area shape="rect" id="node15" href="windows__cahal__device_8cpp.html#a82c30f69909119ceb7c541fdc6fbfb00" title="Entry point to configure the WASAPI to process audio samples. This function will enumerate the audio ..." alt="" coords="218,463,398,488"/>
<area shape="rect" id="node18" href="windows__cahal__device_8cpp.html#a1164d0af46511af5718ab1db53a14ab0" title="Called by the recording thread when signaled that a new capture buffer is ready. This function will g..." alt="" coords="203,513,413,539"/>
<area shape="rect" id="node4" href="android__cahal_8c.html#a2adf261da6eae23641d7bc3fcb433464" title="Create a new audio format struct with the given parameters. " alt="" coords="472,5,648,44"/>
<area shape="rect" id="node5" href="android__cahal_8c.html#ac6d173b6b781d9362293d309dcb45143" title="Generates a new input source (mic) " alt="" coords="486,68,633,107"/>
<area shape="rect" id="node6" href="android__cahal_8c.html#a6d3a2c1d2b17054c7164d582b5ad3076" title="Generates a new input sink (mic) " alt="" coords="471,131,649,156"/>
<area shape="rect" id="node8" href="android__cahal_8c.html#ae774d92ce94dc154b0d10eb7c980a954" title="Sets the configuration on the OpenSLES record object. The configuration sets what mic is used in reco..." alt="" coords="493,180,627,205"/>
<area shape="rect" id="node10" href="android__cahal__device_8c.html#a1de9cef3eee5c3464381dc006d0853f4" title="Callback called when a full buffer of recorded sample is ready for processing. This is the interface ..." alt="" coords="471,232,649,257"/>
<area shape="rect" id="node12" href="android__cahal__device_8c.html#ade42711a1ee086d09cc9c9d27125b22c" title="Computes the number of bytes in an audio buffer passed on the audio format being used and the number ..." alt="" coords="478,288,642,327"/>
<area shape="rect" id="node16" href="windows__cahal__device_8cpp.html#a613df249994808f457e8d8acd5a246f6" title="Activates a new audio client from in_device and initializes it. Calling reinitialize if required..." alt="" coords="496,453,623,492"/>
<area shape="rect" id="node17" href="windows__cahal__device_8cpp.html#a59211b8012b34057dca29ffc4a093631" title="Reinitializes the audio_client with a buffer size that is aligned to the block size in the format..." alt="" coords="706,453,845,492"/>
<area shape="rect" id="node19" href="windows__cahal__device_8cpp.html#a6e98e532653647e9ac3243292757ddd0" title="Reads a buffer full of data from the capture hardware and makes the data available to the callback..." alt="" coords="461,516,658,541"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a30cb2441ebd6aaa5ca0c42b371bd1828"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CPC_BOOL cahal_stop_playback </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calling this function will stop playback and free all structures related to the playback to the OS. If no playback is taking place this function simply returns false. </p>
<dl class="section return"><dt>Returns</dt><dd>True iff playback has been stopped. Note that no playback is stopped if the library hasn't been initialized, or no playback is taking place. </dd></dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l01935">1935</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a30cb2441ebd6aaa5ca0c42b371bd1828_cgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a30cb2441ebd6aaa5ca0c42b371bd1828_cgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a30cb2441ebd6aaa5ca0c42b371bd1828_cgraph" id="windows__cahal__device_8cpp_a30cb2441ebd6aaa5ca0c42b371bd1828_cgraph">
<area shape="rect" id="node2" href="android__cahal__device_8c.html#ae6f9a356488fd8816e130485ff5cbdb6" title="Safely frees all members of the callback struct. " alt="" coords="199,5,351,44"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#a6e0132cf8004b580fb376e66af0a4e45" title="Sets the terminate event and waits for io_thread to complete. " alt="" coords="200,68,350,93"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a662559b543a161142d22fcc81151e275"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CPC_BOOL cahal_stop_recording </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calling this function will stop recording and free all structures related to the recording back to the OS. If no recording is taking place this function simply returns. </p>
<dl class="section return"><dt>Returns</dt><dd>True iff a recording has been stopped. Note that no recording is stopped if the library hasn't been initialized, or no recording is taking place. </dd></dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l01877">1877</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a662559b543a161142d22fcc81151e275_cgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a662559b543a161142d22fcc81151e275_cgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a662559b543a161142d22fcc81151e275_cgraph" id="windows__cahal__device_8cpp_a662559b543a161142d22fcc81151e275_cgraph">
<area shape="rect" id="node2" href="android__cahal__device_8c.html#ae6f9a356488fd8816e130485ff5cbdb6" title="Safely frees all members of the callback struct. " alt="" coords="202,5,354,44"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#a6e0132cf8004b580fb376e66af0a4e45" title="Sets the terminate event and waits for io_thread to complete. " alt="" coords="203,68,353,93"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a82c30f69909119ceb7c541fdc6fbfb00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HRESULT windows_configure_device </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *&#160;</td>
          <td class="paramname"><em>in_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WAVEFORMATEX *&#160;</td>
          <td class="paramname"><em>in_format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IAudioClient **&#160;</td>
          <td class="paramname"><em>out_audio_client</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Entry point to configure the WASAPI to process audio samples. This function will enumerate the audio devices, select the appropriate device (using in_device-&gt;handle) and initialize an audio client to use for capture or render. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_device</td><td>The cahal device struct that contains the handle of the device to be configured. </td></tr>
    <tr><td class="paramname">in_format</td><td>The format of the stream. </td></tr>
    <tr><td class="paramname">out_audio_client</td><td>A created, initialized audio client that can be used to process data buffers. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>S_OK iff out_audio_client is created, activated and initialized. An error code otherwise. </dd></dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l01103">1103</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a82c30f69909119ceb7c541fdc6fbfb00_cgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a82c30f69909119ceb7c541fdc6fbfb00_cgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a82c30f69909119ceb7c541fdc6fbfb00_cgraph" id="windows__cahal__device_8cpp_a82c30f69909119ceb7c541fdc6fbfb00_cgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a613df249994808f457e8d8acd5a246f6" title="Activates a new audio client from in_device and initializes it. Calling reinitialize if required..." alt="" coords="234,5,361,44"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#a59211b8012b34057dca29ffc4a093631" title="Reinitializes the audio_client with a buffer size that is aligned to the block size in the format..." alt="" coords="409,5,548,44"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a82c30f69909119ceb7c541fdc6fbfb00_icgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a82c30f69909119ceb7c541fdc6fbfb00_icgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a82c30f69909119ceb7c541fdc6fbfb00_icgraph" id="windows__cahal__device_8cpp_a82c30f69909119ceb7c541fdc6fbfb00_icgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#aec6bf662a89cae02dcb40d0a36336343" title="The entry point into the CAHAL library to start recording. The caller is responsible for supplying al..." alt="" coords="234,5,384,31"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#a659d2afa28a2eee575c238ae2c54a90f" title="The entry point into the CAHAL library to start playback. The caller is responsible for supplying all..." alt="" coords="236,55,382,80"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae6a281e4ad81b541aa592d21a85df021"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void windows_configure_format </td>
          <td>(</td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>in_number_of_channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FLOAT64&#160;</td>
          <td class="paramname"><em>in_sample_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>in_bit_depth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WAVEFORMATEX **&#160;</td>
          <td class="paramname"><em>out_format</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Malloc's a new format struct (out_format) and appropriately sets its parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_number_of_channels</td><td>The number of formats in the new format. </td></tr>
    <tr><td class="paramname">in_sample_rate</td><td>The sample rate of the new format. </td></tr>
    <tr><td class="paramname">in_bit_depth</td><td>The bit depth (bits per sample)in the new format. </td></tr>
    <tr><td class="paramname">out_format</td><td>A newly created WAVEFORMATEX struct (must be freed) or NULL if an error occurred. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l01716">1716</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_ae6a281e4ad81b541aa592d21a85df021_icgraph.png" border="0" usemap="#windows__cahal__device_8cpp_ae6a281e4ad81b541aa592d21a85df021_icgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_ae6a281e4ad81b541aa592d21a85df021_icgraph" id="windows__cahal__device_8cpp_ae6a281e4ad81b541aa592d21a85df021_icgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#aec6bf662a89cae02dcb40d0a36336343" title="The entry point into the CAHAL library to start recording. The caller is responsible for supplying al..." alt="" coords="233,5,383,31"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#a659d2afa28a2eee575c238ae2c54a90f" title="The entry point into the CAHAL library to start playback. The caller is responsible for supplying all..." alt="" coords="235,55,381,80"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a56fbdce3a8984a291fe214f0c2e6ea85"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a>** windows_get_device_list </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enumerates the audio IO devices and creates the device list struct. </p>
<p>Gather the list of cahal devices on the system (in and out) and return a null-temrinated list.</p>
<dl class="section return"><dt>Returns</dt><dd>The populated list of devices and their associated streams.</dd>
<dd>
A null-terminated list of CAHAL devices. </dd></dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l00695">695</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a56fbdce3a8984a291fe214f0c2e6ea85_cgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a56fbdce3a8984a291fe214f0c2e6ea85_cgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a56fbdce3a8984a291fe214f0c2e6ea85_cgraph" id="windows__cahal__device_8cpp_a56fbdce3a8984a291fe214f0c2e6ea85_cgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a6ecbb8a1a28854dc0380a2b3b52d5d99" title="Sets out_device&#39;s name, ID, and state by querying the hardware pointed to by in_endpoint. A call is made from this function to set the streams. Success is returned if this device has streams. " alt="" coords="221,111,394,136"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#a933e4ad4650240e144b12f2bad0e2201" title="Sets the device&#39;s ID by querying the underlying hardware. " alt="" coords="453,5,615,31"/>
<area shape="rect" id="node4" href="windows__cahal__device_8cpp.html#af7274836c1ed466a49d60e0fbab7222d" title="Sets the device&#39;s name by querying the underlying hardware. " alt="" coords="442,55,626,80"/>
<area shape="rect" id="node5" href="windows__cahal__device_8cpp.html#afc84d0c0bbfd976488f30a75736e8b4d" title="Sets the device&#39;s state (active or not) by querying the underlying hardware. " alt="" coords="462,104,606,143"/>
<area shape="rect" id="node6" href="windows__cahal__device_8cpp.html#a02e4be615ef077d196997e905b7544c3" title="Sets the preferred sample rate and number of channels for the device pointed to by in_endpoint..." alt="" coords="462,167,606,205"/>
<area shape="rect" id="node7" href="windows__cahal__device__stream_8hpp.html#ae6c27aa975b880169075549321caf76e" title="Mallocs a single stream for each device, sets the stream&#39;s info then sets the supported formats for t..." alt="" coords="462,229,606,268"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a56fbdce3a8984a291fe214f0c2e6ea85_icgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a56fbdce3a8984a291fe214f0c2e6ea85_icgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a56fbdce3a8984a291fe214f0c2e6ea85_icgraph" id="windows__cahal__device_8cpp_a56fbdce3a8984a291fe214f0c2e6ea85_icgraph">
<area shape="rect" id="node2" href="windows__cahal_8c.html#a1c0a250dc3fd364f23fe2e3962e0570f" title="Instantiates a list of audio input/output devices in a platform&#45; agnostic way. " alt="" coords="221,5,370,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aacf83db7f16a45cb6609e8064b9a5b3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void windows_handle_playback_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cahal__device_8h.html#a15208bec2f5c3e8dce404a8c40a66c36">cahal_playback_info</a> *&#160;</td>
          <td class="paramname"><em>in_callback_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called by the playback thread when signaled that a new capture buffer is required. This function will get the capture client and have to set a buffer full of data as set by the callback in in_callback_info. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_callback_info</td><td>The callback to call with a to get a buffer of data. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l01395">1395</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_aacf83db7f16a45cb6609e8064b9a5b3e_cgraph.png" border="0" usemap="#windows__cahal__device_8cpp_aacf83db7f16a45cb6609e8064b9a5b3e_cgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_aacf83db7f16a45cb6609e8064b9a5b3e_cgraph" id="windows__cahal__device_8cpp_aacf83db7f16a45cb6609e8064b9a5b3e_cgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a923f772fe81355016a931174347732ab" title="Calls the callback to get a buffer of data and passes the data to the render client. " alt="" coords="267,5,469,31"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_aacf83db7f16a45cb6609e8064b9a5b3e_icgraph.png" border="0" usemap="#windows__cahal__device_8cpp_aacf83db7f16a45cb6609e8064b9a5b3e_icgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_aacf83db7f16a45cb6609e8064b9a5b3e_icgraph" id="windows__cahal__device_8cpp_aacf83db7f16a45cb6609e8064b9a5b3e_icgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a659d2afa28a2eee575c238ae2c54a90f" title="The entry point into the CAHAL library to start playback. The caller is responsible for supplying all..." alt="" coords="267,5,413,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1164d0af46511af5718ab1db53a14ab0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void windows_handle_recorder_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcahal__recorder__info__t.html">cahal_recorder_info</a> *&#160;</td>
          <td class="paramname"><em>in_callback_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called by the recording thread when signaled that a new capture buffer is ready. This function will get the capture client and read a buffer full of data from it then pass the data to the callback in in_callback_info. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_callback_info</td><td>The callback to call with a buffer full of data. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l01444">1444</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a1164d0af46511af5718ab1db53a14ab0_cgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a1164d0af46511af5718ab1db53a14ab0_cgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a1164d0af46511af5718ab1db53a14ab0_cgraph" id="windows__cahal__device_8cpp_a1164d0af46511af5718ab1db53a14ab0_cgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a6e98e532653647e9ac3243292757ddd0" title="Reads a buffer full of data from the capture hardware and makes the data available to the callback..." alt="" coords="264,5,461,31"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a1164d0af46511af5718ab1db53a14ab0_icgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a1164d0af46511af5718ab1db53a14ab0_icgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a1164d0af46511af5718ab1db53a14ab0_icgraph" id="windows__cahal__device_8cpp_a1164d0af46511af5718ab1db53a14ab0_icgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#aec6bf662a89cae02dcb40d0a36336343" title="The entry point into the CAHAL library to start recording. The caller is responsible for supplying al..." alt="" coords="264,5,413,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a613df249994808f457e8d8acd5a246f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HRESULT windows_initialize_device </td>
          <td>(</td>
          <td class="paramtype">IMMDevice *&#160;</td>
          <td class="paramname"><em>in_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IAudioClient **&#160;</td>
          <td class="paramname"><em>io_audio_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WAVEFORMATEX *&#160;</td>
          <td class="paramname"><em>in_format</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Activates a new audio client from in_device and initializes it. Calling reinitialize if required. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_device</td><td>The device to activate. </td></tr>
    <tr><td class="paramname">io_audio_client</td><td>The newly created audio client, intialized from in_device. </td></tr>
    <tr><td class="paramname">in_format</td><td>The data format to configure the device to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>S_OK iff the audio_client is properly activated and initialized. An error code otherwise. </dd></dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l00942">942</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a613df249994808f457e8d8acd5a246f6_cgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a613df249994808f457e8d8acd5a246f6_cgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a613df249994808f457e8d8acd5a246f6_cgraph" id="windows__cahal__device_8cpp_a613df249994808f457e8d8acd5a246f6_cgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a59211b8012b34057dca29ffc4a093631" title="Reinitializes the audio_client with a buffer size that is aligned to the block size in the format..." alt="" coords="181,5,320,44"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a613df249994808f457e8d8acd5a246f6_icgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a613df249994808f457e8d8acd5a246f6_icgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a613df249994808f457e8d8acd5a246f6_icgraph" id="windows__cahal__device_8cpp_a613df249994808f457e8d8acd5a246f6_icgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a82c30f69909119ceb7c541fdc6fbfb00" title="Entry point to configure the WASAPI to process audio samples. This function will enumerate the audio ..." alt="" coords="181,31,361,56"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#aec6bf662a89cae02dcb40d0a36336343" title="The entry point into the CAHAL library to start recording. The caller is responsible for supplying al..." alt="" coords="409,5,559,31"/>
<area shape="rect" id="node4" href="windows__cahal__device_8cpp.html#a659d2afa28a2eee575c238ae2c54a90f" title="The entry point into the CAHAL library to start playback. The caller is responsible for supplying all..." alt="" coords="411,55,557,80"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a923f772fe81355016a931174347732ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void windows_playback_send_data </td>
          <td>(</td>
          <td class="paramtype">IAudioClient *&#160;</td>
          <td class="paramname"><em>in_audio_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IAudioRenderClient *&#160;</td>
          <td class="paramname"><em>in_render_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WAVEFORMATEX *&#160;</td>
          <td class="paramname"><em>in_format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cahal__device_8h.html#a15208bec2f5c3e8dce404a8c40a66c36">cahal_playback_info</a> *&#160;</td>
          <td class="paramname"><em>in_callback_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calls the callback to get a buffer of data and passes the data to the render client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_audio_client</td><td>Interface to the WASAPI audio client. </td></tr>
    <tr><td class="paramname">in_render_client</td><td>Interface to the WASAPI render client (speaker). </td></tr>
    <tr><td class="paramname">in_format</td><td>The format of the samples that are to be put in the render clients buffer. </td></tr>
    <tr><td class="paramname">in_callback_info</td><td>The callback to call to get the data to render. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l01186">1186</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a923f772fe81355016a931174347732ab_icgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a923f772fe81355016a931174347732ab_icgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a923f772fe81355016a931174347732ab_icgraph" id="windows__cahal__device_8cpp_a923f772fe81355016a931174347732ab_icgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#aacf83db7f16a45cb6609e8064b9a5b3e" title="Called by the playback thread when signaled that a new capture buffer is required. This function will get the capture client and have to set a buffer full of data as set by the callback in in_callback_info. " alt="" coords="256,5,469,31"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#a659d2afa28a2eee575c238ae2c54a90f" title="The entry point into the CAHAL library to start playback. The caller is responsible for supplying all..." alt="" coords="517,5,663,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6e98e532653647e9ac3243292757ddd0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void windows_recorder_read_data </td>
          <td>(</td>
          <td class="paramtype">IAudioCaptureClient *&#160;</td>
          <td class="paramname"><em>in_capture_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WAVEFORMATEX *&#160;</td>
          <td class="paramname"><em>in_format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcahal__recorder__info__t.html">cahal_recorder_info</a> *&#160;</td>
          <td class="paramname"><em>in_callback_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a buffer full of data from the capture hardware and makes the data available to the callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_capture_client</td><td>The capture client to record the data from. </td></tr>
    <tr><td class="paramname">in_format</td><td>The format the data is in. </td></tr>
    <tr><td class="paramname">in_callback_info</td><td>The callback to call with the new data. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l01304">1304</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a6e98e532653647e9ac3243292757ddd0_icgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a6e98e532653647e9ac3243292757ddd0_icgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a6e98e532653647e9ac3243292757ddd0_icgraph" id="windows__cahal__device_8cpp_a6e98e532653647e9ac3243292757ddd0_icgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a1164d0af46511af5718ab1db53a14ab0" title="Called by the recording thread when signaled that a new capture buffer is ready. This function will g..." alt="" coords="250,5,461,31"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#aec6bf662a89cae02dcb40d0a36336343" title="The entry point into the CAHAL library to start recording. The caller is responsible for supplying al..." alt="" coords="509,5,658,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a59211b8012b34057dca29ffc4a093631"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HRESULT windows_reinitialize_device </td>
          <td>(</td>
          <td class="paramtype">IMMDevice *&#160;</td>
          <td class="paramname"><em>in_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IAudioClient **&#160;</td>
          <td class="paramname"><em>io_audio_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WAVEFORMATEX *&#160;</td>
          <td class="paramname"><em>in_format</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reinitializes the audio_client with a buffer size that is aligned to the block size in the format. This is required when devices are opened in exclusive mode (it is required to align the expected buffer size with the hardware buffer size). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_device</td><td>The endpoint device that the audio client is attached to. </td></tr>
    <tr><td class="paramname">io_audio_client</td><td>The audio client to reinitialize. Note that the passed in audio client will be released and a new one will be initialized. </td></tr>
    <tr><td class="paramname">in_format</td><td>The data format that the device is configured to capture in. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>S_OK iff the audio_client is reinitialized with the appropriate sized buffer. An error code otherwise. </dd></dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l01007">1007</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a59211b8012b34057dca29ffc4a093631_icgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a59211b8012b34057dca29ffc4a093631_icgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a59211b8012b34057dca29ffc4a093631_icgraph" id="windows__cahal__device_8cpp_a59211b8012b34057dca29ffc4a093631_icgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a613df249994808f457e8d8acd5a246f6" title="Activates a new audio client from in_device and initializes it. Calling reinitialize if required..." alt="" coords="192,24,320,63"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#a82c30f69909119ceb7c541fdc6fbfb00" title="Entry point to configure the WASAPI to process audio samples. This function will enumerate the audio ..." alt="" coords="368,31,548,56"/>
<area shape="rect" id="node4" href="windows__cahal__device_8cpp.html#aec6bf662a89cae02dcb40d0a36336343" title="The entry point into the CAHAL library to start recording. The caller is responsible for supplying al..." alt="" coords="596,5,746,31"/>
<area shape="rect" id="node5" href="windows__cahal__device_8cpp.html#a659d2afa28a2eee575c238ae2c54a90f" title="The entry point into the CAHAL library to start playback. The caller is responsible for supplying all..." alt="" coords="598,55,745,80"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a02e4be615ef077d196997e905b7544c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HRESULT windows_set_device_defaults </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *&#160;</td>
          <td class="paramname"><em>out_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMMDevice *&#160;</td>
          <td class="paramname"><em>in_endpoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the preferred sample rate and number of channels for the device pointed to by in_endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out_device</td><td>The device whos preferred sample rate and number of channels is ot be set. </td></tr>
    <tr><td class="paramname">in_endpoint</td><td>Pointer to the underlying hardware that is to be queried. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>S_OK iff the default format for in_endpoint can be queried. </dd></dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l00655">655</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a02e4be615ef077d196997e905b7544c3_icgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a02e4be615ef077d196997e905b7544c3_icgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a02e4be615ef077d196997e905b7544c3_icgraph" id="windows__cahal__device_8cpp_a02e4be615ef077d196997e905b7544c3_icgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a6ecbb8a1a28854dc0380a2b3b52d5d99" title="Sets out_device&#39;s name, ID, and state by querying the hardware pointed to by in_endpoint. A call is made from this function to set the streams. Success is returned if this device has streams. " alt="" coords="197,12,369,37"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#a56fbdce3a8984a291fe214f0c2e6ea85" title="Enumerates the audio IO devices and creates the device list struct. " alt="" coords="417,12,586,37"/>
<area shape="rect" id="node4" href="windows__cahal_8c.html#a1c0a250dc3fd364f23fe2e3962e0570f" title="Instantiates a list of audio input/output devices in a platform&#45; agnostic way. " alt="" coords="634,12,782,37"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a933e4ad4650240e144b12f2bad0e2201"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HRESULT windows_set_device_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *&#160;</td>
          <td class="paramname"><em>out_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMMDevice *&#160;</td>
          <td class="paramname"><em>in_endpoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the device's ID by querying the underlying hardware. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out_device</td><td>The device whos ID is to be set (this is the device_uid) </td></tr>
    <tr><td class="paramname">in_endpoint</td><td>Pointer to the underlying hardware that is to be queried. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>S_OK iff the devices ID can be queried. </dd></dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l00476">476</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a933e4ad4650240e144b12f2bad0e2201_icgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a933e4ad4650240e144b12f2bad0e2201_icgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a933e4ad4650240e144b12f2bad0e2201_icgraph" id="windows__cahal__device_8cpp_a933e4ad4650240e144b12f2bad0e2201_icgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a6ecbb8a1a28854dc0380a2b3b52d5d99" title="Sets out_device&#39;s name, ID, and state by querying the hardware pointed to by in_endpoint. A call is made from this function to set the streams. Success is returned if this device has streams. " alt="" coords="215,5,387,31"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#a56fbdce3a8984a291fe214f0c2e6ea85" title="Enumerates the audio IO devices and creates the device list struct. " alt="" coords="435,5,603,31"/>
<area shape="rect" id="node4" href="windows__cahal_8c.html#a1c0a250dc3fd364f23fe2e3962e0570f" title="Instantiates a list of audio input/output devices in a platform&#45; agnostic way. " alt="" coords="651,5,800,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6ecbb8a1a28854dc0380a2b3b52d5d99"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HRESULT windows_set_device_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *&#160;</td>
          <td class="paramname"><em>out_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMMDevice *&#160;</td>
          <td class="paramname"><em>in_endpoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets out_device's name, ID, and state by querying the hardware pointed to by in_endpoint. A call is made from this function to set the streams. Success is returned if this device has streams. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out_device</td><td>The device whos name, ID, streams and state are to be set. </td></tr>
    <tr><td class="paramname">in_endpoint</td><td>Pointer to the underlying hardware that is to be queried. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>S_OK iff the devices streams are set correctly. An error code otherwise. </dd></dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l00601">601</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a6ecbb8a1a28854dc0380a2b3b52d5d99_cgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a6ecbb8a1a28854dc0380a2b3b52d5d99_cgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a6ecbb8a1a28854dc0380a2b3b52d5d99_cgraph" id="windows__cahal__device_8cpp_a6ecbb8a1a28854dc0380a2b3b52d5d99_cgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a933e4ad4650240e144b12f2bad0e2201" title="Sets the device&#39;s ID by querying the underlying hardware. " alt="" coords="237,5,399,31"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#af7274836c1ed466a49d60e0fbab7222d" title="Sets the device&#39;s name by querying the underlying hardware. " alt="" coords="226,55,410,80"/>
<area shape="rect" id="node4" href="windows__cahal__device_8cpp.html#afc84d0c0bbfd976488f30a75736e8b4d" title="Sets the device&#39;s state (active or not) by querying the underlying hardware. " alt="" coords="246,104,390,143"/>
<area shape="rect" id="node5" href="windows__cahal__device_8cpp.html#a02e4be615ef077d196997e905b7544c3" title="Sets the preferred sample rate and number of channels for the device pointed to by in_endpoint..." alt="" coords="246,167,390,205"/>
<area shape="rect" id="node6" href="windows__cahal__device__stream_8hpp.html#ae6c27aa975b880169075549321caf76e" title="Mallocs a single stream for each device, sets the stream&#39;s info then sets the supported formats for t..." alt="" coords="246,229,390,268"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a6ecbb8a1a28854dc0380a2b3b52d5d99_icgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a6ecbb8a1a28854dc0380a2b3b52d5d99_icgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a6ecbb8a1a28854dc0380a2b3b52d5d99_icgraph" id="windows__cahal__device_8cpp_a6ecbb8a1a28854dc0380a2b3b52d5d99_icgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a56fbdce3a8984a291fe214f0c2e6ea85" title="Enumerates the audio IO devices and creates the device list struct. " alt="" coords="226,5,394,31"/>
<area shape="rect" id="node3" href="windows__cahal_8c.html#a1c0a250dc3fd364f23fe2e3962e0570f" title="Instantiates a list of audio input/output devices in a platform&#45; agnostic way. " alt="" coords="442,5,591,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af7274836c1ed466a49d60e0fbab7222d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HRESULT windows_set_device_name </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *&#160;</td>
          <td class="paramname"><em>out_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMMDevice *&#160;</td>
          <td class="paramname"><em>in_endpoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the device's name by querying the underlying hardware. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out_device</td><td>The device whos name is to be sets </td></tr>
    <tr><td class="paramname">in_endpoint</td><td>Pointer to the underlying hardware that is to be queried. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>S_OK iff the devices name can be queried. </dd></dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l00546">546</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_af7274836c1ed466a49d60e0fbab7222d_icgraph.png" border="0" usemap="#windows__cahal__device_8cpp_af7274836c1ed466a49d60e0fbab7222d_icgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_af7274836c1ed466a49d60e0fbab7222d_icgraph" id="windows__cahal__device_8cpp_af7274836c1ed466a49d60e0fbab7222d_icgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a6ecbb8a1a28854dc0380a2b3b52d5d99" title="Sets out_device&#39;s name, ID, and state by querying the hardware pointed to by in_endpoint. A call is made from this function to set the streams. Success is returned if this device has streams. " alt="" coords="238,5,410,31"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#a56fbdce3a8984a291fe214f0c2e6ea85" title="Enumerates the audio IO devices and creates the device list struct. " alt="" coords="458,5,626,31"/>
<area shape="rect" id="node4" href="windows__cahal_8c.html#a1c0a250dc3fd364f23fe2e3962e0570f" title="Instantiates a list of audio input/output devices in a platform&#45; agnostic way. " alt="" coords="674,5,823,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afc84d0c0bbfd976488f30a75736e8b4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HRESULT windows_set_device_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cahal__device_8h.html#a8ac3fc33cbaf834ea9bd917b9d861426">cahal_device</a> *&#160;</td>
          <td class="paramname"><em>out_device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMMDevice *&#160;</td>
          <td class="paramname"><em>in_endpoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the device's state (active or not) by querying the underlying hardware. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out_device</td><td>The device whos state is to be set </td></tr>
    <tr><td class="paramname">in_endpoint</td><td>Pointer to the underlying hardware that is to be queried. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>S_OK iff the devices state can be queried. </dd></dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l00520">520</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_afc84d0c0bbfd976488f30a75736e8b4d_icgraph.png" border="0" usemap="#windows__cahal__device_8cpp_afc84d0c0bbfd976488f30a75736e8b4d_icgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_afc84d0c0bbfd976488f30a75736e8b4d_icgraph" id="windows__cahal__device_8cpp_afc84d0c0bbfd976488f30a75736e8b4d_icgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a6ecbb8a1a28854dc0380a2b3b52d5d99" title="Sets out_device&#39;s name, ID, and state by querying the hardware pointed to by in_endpoint. A call is made from this function to set the streams. Success is returned if this device has streams. " alt="" coords="197,12,369,37"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#a56fbdce3a8984a291fe214f0c2e6ea85" title="Enumerates the audio IO devices and creates the device list struct. " alt="" coords="417,12,586,37"/>
<area shape="rect" id="node4" href="windows__cahal_8c.html#a1c0a250dc3fd364f23fe2e3962e0570f" title="Instantiates a list of audio input/output devices in a platform&#45; agnostic way. " alt="" coords="634,12,782,37"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6e0132cf8004b580fb376e66af0a4e45"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CPC_BOOL windows_stop_thread </td>
          <td>(</td>
          <td class="paramtype">PHANDLE&#160;</td>
          <td class="paramname"><em>io_terminate_event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PHANDLE&#160;</td>
          <td class="paramname"><em>io_thread</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the terminate event and waits for io_thread to complete. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_terminate_event</td><td>The event to signal for the thread to stop. </td></tr>
    <tr><td class="paramname">io_thread</td><td>The thread to wait for completion. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CPC_TRUE if the thread was successfully terminated. False otherwise. </dd></dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l01993">1993</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="windows__cahal__device_8cpp_a6e0132cf8004b580fb376e66af0a4e45_icgraph.png" border="0" usemap="#windows__cahal__device_8cpp_a6e0132cf8004b580fb376e66af0a4e45_icgraph" alt=""/></div>
<map name="windows__cahal__device_8cpp_a6e0132cf8004b580fb376e66af0a4e45_icgraph" id="windows__cahal__device_8cpp_a6e0132cf8004b580fb376e66af0a4e45_icgraph">
<area shape="rect" id="node2" href="windows__cahal__device_8cpp.html#a662559b543a161142d22fcc81151e275" title="Calling this function will stop recording and free all structures related to the recording back to th..." alt="" coords="204,5,352,31"/>
<area shape="rect" id="node3" href="windows__cahal__device_8cpp.html#a30cb2441ebd6aaa5ca0c42b371bd1828" title="Calling this function will stop playback and free all structures related to the playback to the OS..." alt="" coords="205,55,351,80"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6259169fe3be10ca5d1d6d434f57f068"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DWORD WINAPI windows_thread_entry </td>
          <td>(</td>
          <td class="paramtype">LPVOID&#160;</td>
          <td class="paramname"><em>in_handler_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Entry point for the processing threads. This function will block on the data ready and terminate events and handle them when signalled. When the terminate event is signalled the thread will exit. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">in_handler_info</td><td>Contains all the events, callback function and label for the thread handling processing events from the kernel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Exit code (always 0). </dd></dl>

<p>Definition at line <a class="el" href="windows__cahal__device_8cpp_source.html#l01493">1493</a> of file <a class="el" href="windows__cahal__device_8cpp_source.html">windows_cahal_device.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_f584182df4c69fab0b14563b4d535158.html">windows</a></li><li class="navelem"><a class="el" href="windows__cahal__device_8cpp.html">windows_cahal_device.cpp</a></li>
    <li class="footer">Generated on Fri Apr 1 2016 09:45:22 for CAHAL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
